<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- â•â•â• PRIMARY SEO â•â•â• -->
<title>Reaction Time Test, Typing Test, Dino Game & Click Speed Test â€” Free Online</title>
<meta name="description" content="Free online games: reaction time test, typing speed test (WPM), click speed test (CPS), dinosaur game, coreball, jitter click, spacebar test and stimulation clicker. Test your reflexes instantly.">
<meta name="keywords" content="reaction time test, typing speed test, WPM test, dinosaur game, dino game, coreball game, click speed test, CPS test, free typing test, jitter click test, spacebar test, stimulation clicker, online reaction test, words per minute, typing test free, chrome dino game">
<link rel="canonical" href="https://reactionspeedtest.com/">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="theme-color" content="#06060e">
<meta name="author" content="Reflex Lab">

<!-- â•â•â• OPEN GRAPH / SOCIAL â•â•â• -->
<meta property="og:type" content="website">
<meta property="og:title" content="Reaction Time Test & Click Speed Test â€” Free CPS Tester">
<meta property="og:description" content="Test your reaction time and click speed for free. Reaction time in milliseconds, CPS test with 8 durations, jitter click, Kohi click, and stimulation clicker. No download needed.">
<meta property="og:url" content="https://reactionspeedtest.com/">
<meta property="og:image" content="https://reactionspeedtest.com/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Reflex Lab">

<!-- â•â•â• TWITTER CARD â•â•â• -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Reaction Time Test & Click Speed Test â€” Free CPS Tester">
<meta name="twitter:description" content="Test your reaction time and CPS for free. 6 modes, 8 durations, instant results.">
<meta name="twitter:image" content="https://reactionspeedtest.com/og-image.png">

<!-- â•â•â• FAVICON â•â•â• -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='7' fill='%2306060e'/><polygon points='20,2 9,18 15.5,18 11,30 23,13 16.5,13' fill='%2300f5a0'/></svg>">

<!-- â•â•â• STRUCTURED DATA (JSON-LD) â•â•â• -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "@id": "https://reactionspeedtest.com/#webapp",
  "name": "Reflex Lab â€” Reaction Time & Click Speed Test",
  "url": "https://reactionspeedtest.com/",
  "description": "Free online tool to test reaction time, click speed (CPS), jitter click, Kohi click, spacebar speed, and stimulation clicker aim training.",
  "applicationCategory": "GameApplication",
  "operatingSystem": "Windows, macOS, Linux, Android, iOS",
  "browserRequirements": "Requires JavaScript",
  "offers": {
    "@type": "Offer",
    "price": 0,
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "url": "https://reactionspeedtest.com/"
  },
  "featureList": [
    "Reaction Time Test",
    "Typing Speed Test (WPM)",
    "Click Speed Test (CPS)",
    "Coreball Game",
    "Jitter Click Test",
    "Kohi Click Test",
    "Spacebar Speed Test",
    "Stimulation Clicker",
    "8 Time Durations (1sâ€“100s)",
    "Challenge Mode"
  ],
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": 4.8,
    "ratingCount": 2347,
    "bestRating": 5,
    "worstRating": 1
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is a good CPS (clicks per second)?",
      "acceptedAnswer": { "@type": "Answer", "text": "6â€“7 CPS is average. Above 10 CPS is good. Above 14 CPS is exceptional and requires jitter or butterfly clicking with a gaming mouse." }
    },
    {
      "@type": "Question",
      "name": "What is a good reaction time?",
      "acceptedAnswer": { "@type": "Answer", "text": "Average human reaction time is 200â€“250ms. Pro gamers achieve 150â€“200ms. Below 150ms is elite level." }
    },
    {
      "@type": "Question",
      "name": "What is the world record CPS?",
      "acceptedAnswer": { "@type": "Answer", "text": "Regular clicking: 14.1 CPS (Dylan Allred, 2020). Jitter clicking: 16.2 CPS. Butterfly clicking: 25.5 CPS (Nestor, 2022)." }
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://reactionspeedtest.com/" }
  ]
}
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5019628877403001" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:       #06060e;
  --surf:     #0d0d1a;
  --surf2:    #111122;
  --border:   #1c1c30;
  --border2:  #252540;
  --accent:   #00f5a0;
  --red:      #ff2d55;
  --yellow:   #ffe000;
  --purple:   #7b61ff;
  --orange:   #ff6b00;
  --text:     #ffffff;
  --muted:    #b0b0d0;
  --muted2:   #8080b0;
  --row1-h:   52px;
  --row2-h:   44px;
  --header-h: 96px; /* row1 + row2 */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

body {
  font-family: 'JetBrains Mono', monospace;
  background: var(--bg); color: var(--text);
  min-height: 100vh; overflow-x: hidden;
}

/* Subtle ambient glow */
body::before {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(ellipse 70% 35% at 50% 0%, rgba(0,245,160,0.05) 0%, transparent 60%),
    radial-gradient(ellipse 40% 30% at 85% 90%, rgba(255,45,85,0.04) 0%, transparent 60%);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER â€” two fixed rows spanning full width
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
  position: fixed; top:0; left:0; right:0; z-index:200;
  display: flex; flex-direction: column;
  background: rgba(6,6,14,0.96);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(16px);
}

/* â”€â”€â”€ ROW 1: logo + test type tabs + lang â”€â”€â”€ */
.row1 {
  height: var(--row1-h);
  display: flex; align-items: stretch;
  border-bottom: 1px solid var(--border2);
  overflow-x: auto; scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.row1::-webkit-scrollbar { display: none; }

.logo {
  display: flex; align-items: center;
  padding: 0 22px 0 18px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.35rem; letter-spacing: 0.15em;
  background: linear-gradient(135deg, var(--accent), var(--yellow));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  white-space: nowrap; flex-shrink: 0; text-decoration: none;
  border-right: 1px solid var(--border2);
}

/* Test type tabs */
.tabs {
  display: flex; align-items: stretch;
  flex: 1; overflow-x: auto; scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.tabs::-webkit-scrollbar { display: none; }

.tab {
  display: flex; align-items: center; gap: 7px;
  padding: 0 20px; cursor: pointer;
  font-size: 0.72rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase;
  color: #c0c0e0; white-space: nowrap; flex-shrink: 0;
  background: none; border: none; border-bottom: 2px solid transparent;
  transition: color 0.18s, border-color 0.18s;
  position: relative;
}
.tab:hover { color: #ffffff; }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab .ticon { font-size: 1.05rem; }

/* Language */
.lang {
  display: flex; align-items: center;
  padding: 0 16px; gap: 4px;
  flex-shrink: 0; margin-left: auto;
  border-left: 1px solid var(--border2);
}
.lbtn {
  padding: 4px 10px; border: 1px solid var(--border2); border-radius: 6px;
  font-size: 0.55rem; font-weight: 700; letter-spacing: 0.1em;
  cursor: pointer; background: none; color: var(--muted); transition: all 0.15s;
}
.lbtn.active { background: var(--accent); border-color: var(--accent); color: #000; }

/* â”€â”€â”€ ROW 2: time selector + mode (hidden for reaction/stim) â”€â”€â”€ */
.row2 {
  height: var(--row2-h);
  display: flex; align-items: center;
  padding: 0 16px; gap: 6px;
  overflow-x: auto; scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.row2::-webkit-scrollbar { display: none; }
.row2.hidden { display: none; }

.row2-label {
  font-size: 0.5rem; letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--muted); flex-shrink: 0; padding-right: 6px;
  border-right: 1px solid var(--border2); margin-right: 2px;
}
.row2-sep { width: 1px; height: 22px; background: var(--border2); flex-shrink: 0; margin: 0 6px; }

.tbtn {
  flex-shrink: 0; padding: 5px 14px;
  background: var(--surf); border: 1px solid var(--border);
  border-radius: 8px; cursor: pointer;
  font-size: 0.6rem; font-weight: 700; letter-spacing: 0.05em;
  color: var(--muted); white-space: nowrap;
  transition: all 0.14s;
}
.tbtn:hover { border-color: rgba(0,245,160,0.4); color: var(--text); }
.tbtn.active { background: var(--accent); border-color: var(--accent); color: #000; }

.mbtn {
  flex-shrink: 0; display: flex; align-items: center; gap: 5px;
  padding: 5px 14px; background: var(--surf); border: 1px solid var(--border);
  border-radius: 8px; cursor: pointer;
  font-size: 0.6rem; font-weight: 700; letter-spacing: 0.05em;
  color: var(--muted); white-space: nowrap; transition: all 0.14s;
}
.mbtn:hover { border-color: rgba(123,97,255,0.4); color: var(--text); }
.mbtn.active { background: var(--purple); border-color: var(--purple); color: #fff; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN WRAPPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.wrap {
  padding-top: var(--header-h);
  min-height: 100vh;
  position: relative; z-index: 1;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME ZONE â€” full viewport width, generous height
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.game-zone {
  width: 100%; padding: 28px 24px 0;
  display: flex; flex-direction: column; gap: 18px;
}

/* Page title row */
.gtitle-row { display: flex; align-items: baseline; gap: 14px; flex-wrap: wrap; }
.gtitle {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(2rem, 5vw, 3.2rem);
  letter-spacing: 0.1em; line-height: 1;
  background: linear-gradient(135deg, var(--accent), var(--yellow));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.gtitle.red { background: linear-gradient(135deg, var(--red), var(--orange)); -webkit-background-clip: text; background-clip: text; }
.gsub {
  font-size: 0.58rem; letter-spacing: 0.22em; text-transform: uppercase; color: var(--muted);
}

/* Stats bar â€” always 4 cards, full width */
.stats-bar {
  display: grid; grid-template-columns: repeat(4,1fr); gap: 10px;
}
@media(max-width:480px) { .stats-bar { grid-template-columns: repeat(2,1fr); } }

.scard {
  background: var(--surf); border: 1px solid var(--border);
  border-radius: 12px; padding: 12px 14px; text-align: center;
  transition: border-color 0.3s;
}
.scard.hi1 { border-color: var(--accent); }
.scard.hi2 { border-color: var(--yellow); }
.scard.hi3 { border-color: var(--purple); }
.scard.hi4 { border-color: var(--red); }
.slbl { font-size: 0.48rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--muted); margin-bottom: 5px; }
.sval {
  font-family: 'Bebas Neue', sans-serif; font-size: clamp(1.6rem, 4vw, 2.2rem);
  letter-spacing: 0.04em; color: var(--accent); line-height: 1;
}
.sval.yellow { color: var(--yellow); }
.sval.purple { color: var(--purple); }
.sval.red    { color: var(--red); }
.sval.muted  { color: var(--muted); }

/* â”€â”€â”€ CLICK ARENA â”€â”€â”€ */
.click-arena {
  width: 100%; max-width: 680px; align-self: center;
  height: clamp(300px, 45vh, 520px);
  background: var(--surf);
  border: 2px solid var(--border);
  border-radius: 20px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 14px;
  cursor: pointer; position: relative; overflow: hidden;
  transition: background 0.2s, border-color 0.2s, transform 0.07s;
  user-select: none; touch-action: manipulation;
}
.click-arena:active { transform: scale(0.995); }

/* Grid texture */
.click-arena::before {
  content:''; position:absolute; inset:0; pointer-events:none;
  background-image:
    repeating-linear-gradient(0deg,transparent,transparent 39px,rgba(255,255,255,0.013) 40px),
    repeating-linear-gradient(90deg,transparent,transparent 39px,rgba(255,255,255,0.013) 40px);
}

.click-arena.idle    { background: #090914; }
.click-arena.running { background: #040f0a; border-color: rgba(0,245,160,0.4); }
.click-arena.done    { background: #0f0f04; border-color: rgba(255,224,0,0.4); }

.big-cps {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(5rem, 18vw, 11rem);
  letter-spacing: 0.03em; line-height: 1;
  color: var(--accent); transition: color 0.2s;
  pointer-events: none; position: relative; z-index: 1;
}
.click-arena.done    .big-cps { color: var(--yellow); }

/* When result overlay shows, fade the background CPS number so it doesn't bleed through */
.result-overlay.show ~ * { opacity: 0.08; }
.result-overlay.show + .arena-label { opacity: 0.06; }

/* Explicit fade for big-cps when overlay active â€” target via sibling */
.click-arena:has(.result-overlay.show) .big-cps { opacity: 0.06; transition: opacity 0.2s; }
.click-arena:has(.result-overlay.show) .arena-label { opacity: 0.04; transition: opacity 0.2s; }
.click-arena:has(.result-overlay.show) .prog { opacity: 0.04; transition: opacity 0.2s; }
.click-arena:has(.result-overlay.show) .combo-badge { display: none; }

.arena-label {
  font-size: 0.65rem; letter-spacing: 0.25em; text-transform: uppercase;
  color: var(--muted); text-align: center; pointer-events: none;
  position: relative; z-index: 1;
}

/* Progress bar */
.prog {
  width: 70%; max-width: 500px; height: 5px;
  background: var(--border); border-radius: 3px; overflow: hidden;
  position: relative; z-index: 1;
}
.prog-fill {
  height: 100%; background: var(--accent); border-radius: 3px;
  transition: width 0.1s linear;
}
.click-arena.done .prog-fill { background: var(--yellow); }

/* Result overlay */
.result-overlay {
  display: none; position: absolute; inset: 0; z-index: 10;
  background: rgba(6,6,14,0.92); border-radius: 18px;
  flex-direction: column; align-items: center; justify-content: center; gap: 8px;
  text-align: center; padding: 20px;
}
.result-overlay.show { display: flex; animation: popIn 0.22s ease; }
@keyframes popIn { from{opacity:0;transform:scale(0.94)} to{opacity:1;transform:scale(1)} }

.r-label  { font-size: 0.58rem; letter-spacing: 0.25em; text-transform: uppercase; color: var(--muted); width:100%; text-align:center; }
.r-score  { font-family: 'Bebas Neue', sans-serif; font-size: clamp(4rem,15vw,9rem); line-height: 1; width:100%; text-align:center; display:block; }
.r-unit   { font-size: 0.58rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--muted); width:100%; text-align:center; }
.r-rank   { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; letter-spacing: 0.15em; padding: 6px 22px; border-radius: 30px; text-align:center; }
.r-retry  {
  margin-top: 8px; padding: 12px 36px;
  background: var(--accent); color: #000; border: none; border-radius: 12px;
  font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 0.15em;
  cursor: pointer; transition: all 0.2s;
}
.r-retry:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(0,245,160,0.35); }

/* Challenge mode */
.click-arena.challenge-active { border-color: var(--red) !important; animation: challengePulse 0.4s infinite; }
@keyframes challengePulse { 0%,100%{box-shadow:0 0 0 0 rgba(255,45,85,0.3)} 50%{box-shadow:0 0 0 20px rgba(255,45,85,0)} }
.ch-target {
  position:absolute; border-radius:50%; cursor:pointer; pointer-events:auto; z-index:5;
  display:flex; align-items:center; justify-content:center;
  font-size:0.5rem; font-weight:700; color:#fff; letter-spacing:0.05em;
  animation: chTargetIn 0.15s ease;
  transition: transform 0.06s, opacity 0.06s;
}
.ch-target:hover { transform: scale(1.1); }
@keyframes chTargetIn { from{opacity:0;transform:scale(0.4)} to{opacity:1;transform:scale(1)} }
.ch-shrink-ring {
  position:absolute; inset:-4px; border-radius:50%;
  border:2px solid rgba(255,45,85,0.6);
  animation: shrink linear forwards;
}
@keyframes shrink { from{transform:scale(1);opacity:1} to{transform:scale(0.1);opacity:0} }
.combo-badge {
  position:absolute; top:10px; right:12px; z-index:6;
  font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:0.1em;
  color:var(--red); background:rgba(255,45,85,0.12); border:1px solid rgba(255,45,85,0.3);
  padding:4px 10px; border-radius:8px; pointer-events:none;
  display:none;
}
.combo-badge.show { display:block; }
.space-key {
  width: 100%; max-width: 600px; height: 72px;
  background: var(--surf2); border: 2px solid var(--border);
  border-bottom: 6px solid var(--border2); border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.68rem; letter-spacing: 0.35em; text-transform: uppercase;
  color: var(--muted); cursor: pointer; user-select: none; touch-action: manipulation;
  transition: all 0.07s;
}
.space-key:active, .space-key.down {
  border-bottom-width: 2px; transform: translateY(4px);
  border-color: var(--purple); color: var(--purple);
}

/* â”€â”€â”€ REACTION ARENA â”€â”€â”€ */
.reaction-arena {
  width: 100%; max-width: 680px; align-self: center;
  height: clamp(300px, 45vh, 520px);
  border-radius: 20px; overflow: hidden;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 12px;
  cursor: pointer; position: relative;
  border: 2px solid var(--border);
  transition: background 0.18s, border-color 0.18s, transform 0.07s;
  user-select: none; touch-action: manipulation;
}
.reaction-arena::before {
  content:''; position:absolute; inset:0; pointer-events:none;
  background-image:
    repeating-linear-gradient(0deg,transparent,transparent 39px,rgba(255,255,255,0.013) 40px),
    repeating-linear-gradient(90deg,transparent,transparent 39px,rgba(255,255,255,0.013) 40px);
}
.reaction-arena:active { transform: scale(0.995); }
.reaction-arena.s-wait  { background: #08080f; }
.reaction-arena.s-ready { background: #0f0209; border-color: rgba(255,45,85,0.5); animation: pRed 0.7s infinite; }
.reaction-arena.s-go    { background: #01100a; border-color: rgba(0,245,160,0.7); animation: pGreen 0.4s 1; }
.reaction-arena.s-early { background: #100500; border-color: rgba(255,107,0,0.6); }
.reaction-arena.s-done  { background: var(--surf); border-color: rgba(0,245,160,0.4); }
@keyframes pRed   { 0%,100%{box-shadow:0 0 0 0 rgba(255,45,85,0.2)} 50%{box-shadow:0 0 0 30px rgba(255,45,85,0)} }
@keyframes pGreen { 0%{box-shadow:0 0 0 0 rgba(0,245,160,0.5)} 100%{box-shadow:0 0 0 60px rgba(0,245,160,0)} }
.arena-icon { font-size: 3.5rem; position: relative; z-index:1; pointer-events: none; }
.arena-text {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(2.2rem,8vw,4rem);
  letter-spacing: 0.1em; text-align: center; line-height: 1;
  position: relative; z-index:1; pointer-events: none; padding: 0 20px;
}
.arena-sub {
  font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--muted); text-align: center;
  position: relative; z-index:1; pointer-events: none;
}
.ms-big { font-family:'Bebas Neue',sans-serif; font-size:clamp(4rem,15vw,8rem); line-height:1; color:var(--accent); }
.ms-unit{ font-size:0.62rem; letter-spacing:0.3em; color:var(--muted); text-transform:uppercase; }
.rat-pill{ font-size:0.68rem; letter-spacing:0.15em; text-transform:uppercase; padding:5px 16px; border-radius:20px; margin-top:4px; }

/* Rounds dots */
.dots-row { display:flex; gap:8px; width:100%; }
.dot { flex:1; height:6px; border-radius:3px; background:var(--border); transition:background 0.3s; }
.dot.done    { background:var(--accent); }
.dot.fail    { background:var(--red); }
.dot.current { background:var(--muted); animation:blink 0.9s ease-in-out infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

.hist-row { display:flex; gap:6px; flex-wrap:wrap; min-height:26px; }
.hchip { background:var(--surf); border:1px solid var(--border); border-radius:7px; padding:3px 9px; font-size:0.6rem; color:var(--muted); }
.hchip.best{ border-color:var(--accent); color:var(--accent); }
.hchip.fail{ border-color:var(--red); color:var(--red); }

.gameover {
  width:100%; background:var(--surf); border:1px solid var(--border);
  border-radius:18px; padding:24px 20px; text-align:center;
  display:none; flex-direction:column; align-items:center; gap:16px;
  animation:slideUp 0.35s ease;
}
.gameover.show{ display:flex; }
@keyframes slideUp{ from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:translateY(0)} }
.go-title{ font-family:'Bebas Neue',sans-serif; font-size:2.2rem; letter-spacing:0.1em; color:var(--yellow); }
.go-stats{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; width:100%; }
.go-stat{ background:var(--bg); border-radius:10px; padding:10px 8px; }
.go-slbl{ font-size:0.48rem; letter-spacing:0.2em; text-transform:uppercase; color:var(--muted); margin-bottom:4px; }
.go-sval{ font-family:'Bebas Neue',sans-serif; font-size:1.5rem; color:var(--accent); }
.go-sval.bad{ color:var(--red); }
.replay-btn{
  width:100%; padding:16px; background:var(--accent); color:#000; border:none;
  border-radius:13px; font-family:'Bebas Neue',sans-serif; font-size:1.3rem;
  letter-spacing:0.15em; cursor:pointer; transition:all 0.2s;
}
.replay-btn:hover{ transform:translateY(-2px); box-shadow:0 10px 28px rgba(0,245,160,0.3); }

/* â”€â”€â”€ STIMULATION ARENA â”€â”€â”€ */
.stim-arena {
  width: 100%;
  height: clamp(340px, 50vh, 560px);
  background: #08060f;
  border: 2px solid var(--border);
  border-radius: 20px;
  position: relative; overflow: hidden;
  cursor: crosshair;
}
.stim-idle {
  position:absolute; inset:0; display:flex;
  flex-direction:column; align-items:center; justify-content:center; gap:16px; z-index:5;
}
.stim-idle-title {
  font-family:'Bebas Neue',sans-serif;
  font-size:clamp(2rem,6vw,3.5rem); letter-spacing:0.1em;
  background:linear-gradient(135deg,var(--red),var(--orange));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.stim-idle-sub { font-size:0.62rem; letter-spacing:0.2em; text-transform:uppercase; color:var(--muted); }
.diff-row { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
.diff-btn {
  padding:9px 22px; border-radius:10px; cursor:pointer;
  font-family:'JetBrains Mono',monospace; font-size:0.62rem; font-weight:700; letter-spacing:0.1em;
  transition:all 0.15s; background:none; border:2px solid transparent;
}
.diff-btn.easy   { border-color:var(--accent); color:var(--accent); background:rgba(0,245,160,0.08); }
.diff-btn.medium { border-color:var(--yellow); color:var(--yellow); background:rgba(255,224,0,0.08); }
.diff-btn.hard   { border-color:var(--red);    color:var(--red);    background:rgba(255,45,85,0.1); }
.diff-btn.selected { color:#000; }
.diff-btn.easy.selected   { background:var(--accent); }
.diff-btn.medium.selected { background:var(--yellow); }
.diff-btn.hard.selected   { background:var(--red); }
.stim-start-btn {
  padding:12px 36px; border-radius:12px;
  background:var(--red); color:#fff; border:none; cursor:pointer;
  font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:0.15em;
  transition:all 0.2s;
}
.stim-start-btn:hover{ transform:translateY(-2px); box-shadow:0 10px 24px rgba(255,45,85,0.35); }

/* Target circles */
.stim-target {
  position:absolute; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  cursor:crosshair; pointer-events:auto; z-index:4;
  animation: targetIn 0.12s ease;
  transition: transform 0.06s;
}
.stim-target:hover { transform:scale(1.06); }
@keyframes targetIn{ from{opacity:0;transform:scale(0.5)} to{opacity:1;transform:scale(1)} }
.target-ring {
  position:absolute; inset:0; border-radius:50%;
  animation: ringPulse 0.8s ease-in-out infinite;
}
@keyframes ringPulse{
  0%,100%{transform:scale(1);opacity:0.6}
  50%{transform:scale(1.12);opacity:0.3}
}

/* Countdown inside arena */
.stim-countdown {
  position:absolute; inset:0; display:flex; flex-direction:column;
  align-items:center; justify-content:center; pointer-events:none; z-index:3;
}
.stim-count-num {
  font-family:'Bebas Neue',sans-serif; font-size:clamp(3rem,10vw,6rem);
  letter-spacing:0.1em; color:var(--red); opacity:0;
  animation:countAnim 1s ease-in-out;
}
@keyframes countAnim{ 0%{opacity:1;transform:scale(1.3)} 70%{opacity:1} 100%{opacity:0;transform:scale(0.8)} }

/* Stim result */
.stim-result {
  display:none; position:absolute; inset:0; z-index:20;
  background:rgba(6,6,14,0.92); border-radius:18px;
  flex-direction:column; align-items:center; justify-content:center; gap:10px;
}
.stim-result.show{ display:flex; animation:popIn 0.25s ease; }
.stim-r-score{ font-family:'Bebas Neue',sans-serif; font-size:clamp(5rem,16vw,9rem); line-height:1; }
.stim-r-rank { font-family:'Bebas Neue',sans-serif; font-size:1.6rem; letter-spacing:0.15em; }
.stim-replay{ margin-top:6px; padding:12px 36px; background:var(--red); color:#fff; border:none; border-radius:12px; font-family:'Bebas Neue',sans-serif; font-size:1.15rem; letter-spacing:0.15em; cursor:pointer; transition:all 0.2s; }
.stim-replay:hover{ transform:translateY(-2px); box-shadow:0 10px 24px rgba(255,45,85,0.4); }

/* Miss flash */
.miss-flash {
  position:absolute; pointer-events:none; z-index:6;
  width:60px; height:60px; margin:-30px;
  border-radius:50%; background:rgba(255,45,85,0.4);
  animation: missAnim 0.4s ease forwards;
}
@keyframes missAnim{ 0%{opacity:1;transform:scale(0.8)} 100%{opacity:0;transform:scale(2)} }

/* Hit popup */
.hit-popup {
  position:absolute; pointer-events:none; z-index:7;
  font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:0.1em;
  animation:hitAnim 0.5s ease forwards;
}
@keyframes hitAnim{ 0%{opacity:1;transform:translateY(0)} 100%{opacity:0;transform:translateY(-40px)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INFO SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.info-wrap {
  width: 100%; margin: 48px auto 0;
  padding: 0 24px 80px;
  display: flex; flex-direction: column; gap: 28px;
}
.sec-divider {
  display:flex; align-items:center; gap:14px;
  font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:0.2em; color:var(--muted);
}
.sec-divider::before,.sec-divider::after { content:''; flex:1; height:1px; background:var(--border); }

.icard {
  background:var(--surf); border:1px solid var(--border); border-radius:16px;
  padding:26px 22px; display:flex; flex-direction:column; gap:16px;
}
.icard-title { font-family:'Bebas Neue',sans-serif; font-size:clamp(1.3rem,4vw,1.8rem); letter-spacing:0.1em; color:var(--accent); }
.ibody { font-size:0.78rem; line-height:1.9; color:#c8c8e8; }
.ibody strong { color:#ffffff; }

/* Rank table */
.rtable { width:100%; border-collapse:collapse; }
.rtable th { font-size:0.5rem; letter-spacing:0.18em; text-transform:uppercase; color:var(--muted); padding:8px 12px; text-align:left; border-bottom:1px solid var(--border); }
.rtable td { padding:12px 12px; font-size:0.63rem; border-bottom:1px solid rgba(28,28,48,0.7); vertical-align:middle; }
.rtable tr:last-child td { border-bottom:none; }
.rbadge { display:inline-flex; align-items:center; gap:8px; font-weight:700; font-size:0.66rem; }
.rdot   { width:10px; height:10px; border-radius:50%; flex-shrink:0; }

/* Technique grid */
.tech-grid { display:flex; flex-direction:column; gap:12px; }
.tcard { background:var(--bg); border:1px solid var(--border); border-radius:14px; padding:16px 16px; display:flex; flex-direction:column; gap:8px; }
.thead-row { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.tname { font-family:'Bebas Neue',sans-serif; font-size:1.15rem; letter-spacing:0.08em; color:var(--text); }
.tbadge { font-size:0.5rem; letter-spacing:0.15em; text-transform:uppercase; padding:3px 10px; border-radius:20px; }
.tbadge.g { background:rgba(0,245,160,0.1); border:1px solid rgba(0,245,160,0.3); color:var(--accent); }
.tbadge.y { background:rgba(255,224,0,0.1); border:1px solid rgba(255,224,0,0.3); color:var(--yellow); }
.tbadge.r { background:rgba(255,45,85,0.1); border:1px solid rgba(255,45,85,0.3); color:var(--red); }
.tbadge.p { background:rgba(123,97,255,0.1); border:1px solid rgba(123,97,255,0.3); color:var(--purple); }
.tbody-t { font-size:0.75rem; line-height:1.8; color:#c8c8e8; }
.tbody-t strong { color:var(--text); }

/* Factors */
.fgrid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
@media(max-width:400px){ .fgrid{ grid-template-columns:1fr; } }
.fitem { background:var(--bg); border:1px solid var(--border); border-radius:12px; padding:14px 12px; }
.ficon { font-size:1.4rem; margin-bottom:6px; }
.fname { font-size:0.6rem; letter-spacing:0.1em; text-transform:uppercase; color:var(--text); margin-bottom:4px; }
.fdesc { font-size:0.58rem; line-height:1.6; color:var(--muted); }

/* Exercise list */
.exlist { display:flex; flex-direction:column; gap:10px; }
.exitem { display:flex; align-items:flex-start; gap:12px; background:var(--bg); border-radius:10px; padding:13px 14px; }
.exnum  { font-family:'Bebas Neue',sans-serif; font-size:1.2rem; color:var(--accent); min-width:26px; flex-shrink:0; line-height:1; }
.extxt  { font-size:0.63rem; line-height:1.68; color:var(--muted); }
.extxt strong { color:var(--text); }

/* Records */
.rgrid { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
@media(min-width:600px){ .rgrid{ grid-template-columns:repeat(4,1fr); } }
.ritem { background:var(--bg); border:1px solid var(--border); border-radius:12px; padding:14px 10px; text-align:center; }
.rval  { font-family:'Bebas Neue',sans-serif; font-size:1.9rem; letter-spacing:0.05em; line-height:1; margin-bottom:4px; }
.rlbl  { font-size:0.49rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--muted); }
.rholder{ font-size:0.57rem; color:var(--text); margin-top:5px; }

/* Compare table */
.ctable { width:100%; border-collapse:collapse; font-size:0.6rem; }
.ctable th { text-align:center; padding:8px 6px; font-size:0.48rem; letter-spacing:0.14em; text-transform:uppercase; color:var(--muted); border-bottom:1px solid var(--border); }
.ctable td { text-align:center; padding:9px 6px; border-bottom:1px solid rgba(28,28,48,0.5); color:var(--muted); }
.ctable tr:last-child td { border-bottom:none; }
.ctable td:first-child { text-align:left; color:var(--text); font-weight:700; }
.yes { color:var(--accent); } .no { color:var(--red); } .mid { color:var(--yellow); }

/* Chart */
.chart-wrap { width:100%; overflow-x:auto; }
.chart-ttl  { font-size:0.55rem; letter-spacing:0.16em; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
svg.rchart  { width:100%; height:auto; display:block; min-width:280px; }

/* Speedometer legend */
.slegend { display:flex; flex-wrap:wrap; gap:8px 16px; justify-content:center; margin-top:8px; }
.sleg-item { display:flex; align-items:center; gap:5px; font-size:0.54rem; letter-spacing:0.07em; text-transform:uppercase; }
.sleg-dot  { width:8px; height:8px; border-radius:50%; flex-shrink:0; }

/* Tips */
.tips { display:flex; flex-wrap:wrap; gap:8px; }
.tip  { background:rgba(0,245,160,0.07); border:1px solid rgba(0,245,160,0.2); border-radius:20px; padding:6px 13px; font-size:0.57rem; letter-spacing:0.07em; color:var(--accent); }

/* FAQ */
.faq-list { display:flex; flex-direction:column; gap:8px; }
.faq-item { background:var(--bg); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
.faq-q {
  width:100%; background:none; border:none; text-align:left;
  padding:14px 16px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:10px;
  font-family:'JetBrains Mono',monospace; font-size:0.61rem; font-weight:700; letter-spacing:0.03em; line-height:1.4;
  color:var(--text); transition:color 0.2s;
}
.faq-q:hover { color:var(--accent); }
.faq-arrow { font-size:0.62rem; color:var(--muted); flex-shrink:0; transition:transform 0.25s; }
.faq-item.open .faq-arrow { transform:rotate(180deg); color:var(--accent); }
.faq-a { max-height:0; overflow:hidden; transition:max-height 0.3s ease; font-size:0.62rem; line-height:1.82; color:var(--muted); padding:0 16px; }
.faq-item.open .faq-a { max-height:600px; padding:0 16px 14px; }
.faq-a strong { color:var(--text); }

/* Footer */
.sfooter { width:100%; text-align:center; padding:28px 0 12px; font-size:0.53rem; letter-spacing:0.07em; color:var(--muted); line-height:1.9; border-top:1px solid var(--border); margin-top:10px; }
.sfooter strong { color:var(--text); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE / MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Tablet */
@media(max-width:768px){
  .game-zone { padding:16px 14px 0; gap:12px; }
  .info-wrap  { padding:0 14px 60px; gap:20px; }
  .gtitle { font-size:clamp(1.6rem,6vw,2.4rem); }
  .icard  { padding:18px 16px; }
  .go-stats { grid-template-columns:1fr 1fr 1fr; }
}

/* Mobile */
@media(max-width:520px){
  /* â”€â”€ HEADER â”€â”€ */
  :root {
    --row1-h: 48px;
    --row2-h: 40px;
    --header-h: 88px;
  }
  .logo { padding:0 12px 0 12px; font-size:1.1rem; }

  /* Tab row: wider to scroll, bigger touch targets */
  .row1 { gap:0; }
  .tab  {
    padding:0 14px;
    font-size:0.65rem;
    min-width:85px;
    white-space:nowrap;
  }
  .tab .ticon { font-size:0.85rem; }

  /* Duration buttons smaller */
  .tbtn { padding:4px 10px; font-size:0.55rem; }
  .mbtn { padding:4px 10px; font-size:0.55rem; }
  .row2 { padding:0 10px; gap:4px; }
  .row2-label { font-size:0.45rem; padding-right:4px; }

  /* â”€â”€ GAME AREAS â”€â”€ */
  .game-zone { padding:12px 10px 0; gap:10px; }

  .click-arena {
    height: clamp(200px, 38vh, 340px);
    max-width: 100%;
  }
  .reaction-arena {
    height: clamp(240px, 38vh, 380px);
    max-width: 100%;
  }
  .stim-arena {
    height: clamp(260px, 44vh, 400px);
  }
  .big-cps { font-size:clamp(4rem,20vw,8rem); }
  .arena-icon { font-size:2.5rem; }
  .arena-text { font-size:clamp(1.8rem,7vw,3rem); }

  /* Stats bar: 2 cols on phone */
  .stats-bar { grid-template-columns:1fr 1fr; gap:8px; }
  .scard { padding:10px 8px; }
  .sval  { font-size:clamp(1.4rem,6vw,1.9rem); }
  .slbl  { font-size:0.42rem; }

  /* Title row */
  .gtitle-row { gap:8px; }
  .gtitle { font-size:clamp(1.5rem,7vw,2.2rem); }
  .gsub   { font-size:0.5rem; letter-spacing:0.12em; }

  /* Space key smaller on phone */
  .space-key { height:56px; font-size:0.58rem; }

  /* Reaction gameover */
  .go-stats { grid-template-columns:1fr 1fr 1fr; gap:8px; }
  .go-sval  { font-size:1.2rem; }
  .go-slbl  { font-size:0.42rem; }

  /* Result overlay score */
  .r-score { font-size:clamp(3.5rem,18vw,7rem); }
  .r-rank  { font-size:1.1rem; }

  /* Stim idle */
  .stim-idle-title { font-size:clamp(1.5rem,6vw,2.5rem); }
  .diff-btn { padding:7px 16px; font-size:0.58rem; }

  /* Info section */
  .info-wrap { padding:0 10px 50px; gap:16px; }
  .icard     { padding:14px 12px; }
  .icard-title { font-size:clamp(0.95rem,4vw,1.2rem); }
  .ibody     { font-size:0.63rem; line-height:1.75; }

  /* Tables scroll */
  .rtable, .ctable { font-size:0.55rem; }
  .rtable th, .rtable td { padding:8px 6px; }

  /* Factors grid: 1 col */
  .fgrid { grid-template-columns:1fr; }

  /* Records grid: 2 col */
  .rgrid { grid-template-columns:1fr 1fr; }

  /* Tips */
  .tip { font-size:0.52rem; padding:5px 10px; }

  /* FAQ */
  .faq-q { font-size:0.56rem; padding:12px 12px; }
  .faq-a { font-size:0.58rem; }

  /* Footer */
  .sfooter { font-size:0.48rem; padding:20px 0 10px; }
}

/* Very small phones */
@media(max-width:360px){
  .logo { display:none; }  /* hide logo to give more tab space */
  .tab  { padding:0 10px; font-size:0.5rem; min-width:68px; }
  .click-arena, .reaction-arena { height:clamp(170px,35vh,280px); }
  .stim-arena { height:clamp(220px,42vh,340px); }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FIXED HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="header">

  <!-- ROW 1: Logo + test type tabs + lang toggle -->
  <div class="row1">
    <a class="logo" href="#">âš¡ REFLEX LAB</a>

    <div class="tabs" role="tablist">
      <button class="tab active" data-panel="reaction" onclick="switchPanel('reaction')" role="tab">
        <span class="ticon">âš¡</span> Reaction
      </button>
      <button class="tab" data-panel="stimulation" onclick="switchPanel('stimulation')" role="tab">
        <span class="ticon">ğŸ¯</span> Stimulation
      </button>
      <button class="tab" data-panel="cps" onclick="switchPanel('cps')" role="tab">
        <span class="ticon">ğŸ”¥</span> Click Speed
      </button>
      <button class="tab" data-panel="jitter" onclick="switchPanel('jitter')" role="tab">
        <span class="ticon">ğŸ–±</span> Jitter Click
      </button>
      <button class="tab" data-panel="spacebar" onclick="switchPanel('spacebar')" role="tab">
        <span class="ticon">âŒ¨ï¸</span> Spacebar
      </button>
      <button class="tab" data-panel="dino" onclick="switchPanel('dino')" role="tab">
        <span class="ticon">ğŸ¦•</span> Dino Game
      </button>
      <button class="tab" data-panel="typing" onclick="switchPanel('typing')" role="tab">
        <span class="ticon">ğŸ“</span> Typing Test
      </button>
      <button class="tab" data-panel="coreball" onclick="switchPanel('coreball')" role="tab">
        <span class="ticon">ğŸ®</span> Coreball
      </button>
    </div>

    <div class="lang">
      <button class="lbtn" id="lbtnTR" onclick="setLang('tr')">TR</button>
      <button class="lbtn active" id="lbtnEN" onclick="setLang('en')">EN</button>
    </div>
  </div>

  <!-- ROW 2: time selector + challenge mode (hidden for reaction & stimulation) -->
  <div class="row2" id="row2">
    <span class="row2-label">Duration</span>

    <button class="tbtn" data-s="1"   onclick="setDuration(1)">1s</button>
    <button class="tbtn" data-s="2"   onclick="setDuration(2)">2s</button>
    <button class="tbtn active" data-s="5"   onclick="setDuration(5)">5s</button>
    <button class="tbtn" data-s="10"  onclick="setDuration(10)">10s</button>
    <button class="tbtn" data-s="15"  onclick="setDuration(15)">15s</button>
    <button class="tbtn" data-s="30"  onclick="setDuration(30)">30s</button>
    <button class="tbtn" data-s="60"  onclick="setDuration(60)">60s</button>
    <button class="tbtn" data-s="100" onclick="setDuration(100)">100s</button>

    <div class="row2-sep"></div>
    <span class="row2-label">Mode</span>
    <button class="mbtn active" id="modeNormal" onclick="setClickMode('normal')">ğŸ–± Normal</button>
    <button class="mbtn"        id="modeChallenge" onclick="setClickMode('challenge')">âš¡ Challenge</button>
  </div>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="wrap">

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: CLICK SPEED (shared with jitter & kohi)
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-cps" class="game-zone">

    <div class="gtitle-row">
      <h1 class="gtitle" id="cpsH1">Click Speed Test</h1>
      <span class="gsub" id="cpsSub">5 seconds â€” click as fast as you can</span>
    </div>

    <div class="stats-bar">
      <div class="scard hi1"><div class="slbl">CPS</div><div class="sval" id="cStat">0</div></div>
      <div class="scard"><div class="slbl">Clicks</div><div class="sval muted" id="cClicks">0</div></div>
      <div class="scard hi2"><div class="slbl">Best CPS</div><div class="sval yellow" id="cBest">â€”</div></div>
      <div class="scard hi3"><div class="slbl">Time Left</div><div class="sval purple" id="cTime">5.0</div></div>
    </div>

    <div class="click-arena idle" id="clickArena" tabindex="0" role="button" aria-label="Click area to start">

      <div class="combo-badge" id="comboBadge">COMBO: 0</div>
      <div class="big-cps" id="bigCPS">0</div>
      <div class="arena-label" id="cLabel">Click Here to Start</div>
      <div class="prog" id="cProg" style="display:none">
        <div class="prog-fill" id="cProgFill" style="width:100%"></div>
      </div>

      <!-- Result overlay -->
      <div class="result-overlay" id="cResult">
        <div class="r-label">Your Score</div>
        <div class="r-score" id="rScore">0</div>
        <div class="r-unit">Clicks Per Second</div>
        <div class="r-rank" id="rRank"></div>
        <button class="r-retry" onclick="resetCPS()">â†º Try Again</button>
      </div>

    </div>

    <!-- Challenge mode tip -->
    <div id="challengeTip" style="display:none; font-size:0.6rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--red); text-align:center; padding:4px 0">
      âš¡ CHALLENGE MODE â€” targets appear, click them!
    </div>

  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: SPACEBAR
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-spacebar" class="game-zone" style="display:none">

    <div class="gtitle-row">
      <h1 class="gtitle" style="background:linear-gradient(135deg,var(--purple),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Spacebar Speed Test</h1>
      <span class="gsub" id="sSub">5 seconds â€” press spacebar as fast as you can</span>
    </div>

    <div class="stats-bar">
      <div class="scard hi1"><div class="slbl">Press/sec</div><div class="sval" id="sCPS">0</div></div>
      <div class="scard"><div class="slbl">Total Presses</div><div class="sval muted" id="sClicks">0</div></div>
      <div class="scard hi2"><div class="slbl">Best</div><div class="sval yellow" id="sBest">â€”</div></div>
      <div class="scard hi3"><div class="slbl">Time Left</div><div class="sval purple" id="sTime">5.0</div></div>
    </div>

    <div class="space-key" id="spaceKey" tabindex="0" role="button">SPACEBAR</div>

    <div class="click-arena idle" id="spaceArena" tabindex="0" role="button" style="min-height:260px">
      <div class="big-cps" id="sBig" style="color:var(--purple)">0</div>
      <div class="arena-label" id="sLabel">Press Space Key or Tap Above to Start</div>
      <div class="prog" id="sProg" style="display:none">
        <div class="prog-fill" id="sProgFill" style="width:100%;background:var(--purple)"></div>
      </div>
      <div class="result-overlay" id="sResult">
        <div class="r-label">Your Score</div>
        <div class="r-score" id="srScore" style="color:var(--purple)">0</div>
        <div class="r-unit">Presses Per Second</div>
        <button class="r-retry" style="background:var(--purple);color:#fff" onclick="resetSpace()">â†º Try Again</button>
      </div>
    </div>

  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: REACTION
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-reaction" class="game-zone" style="display:none">

    <div class="gtitle-row">
      <h1 class="gtitle">Reaction Speed Test</h1>
      <span class="gsub">5 rounds â€” tap when the arena turns green</span>
    </div>

    <div class="stats-bar">
      <div class="scard"><div class="slbl" id="lScore">Score</div><div class="sval" id="rDisp">0</div></div>
      <div class="scard hi1"><div class="slbl" id="lBest">Best</div><div class="sval" id="rBest">---</div></div>
      <div class="scard"><div class="slbl" id="lAvg">Average</div><div class="sval yellow" id="rAvg">---</div></div>
      <div class="scard hi3"><div class="slbl" id="lRound">Round</div><div class="sval purple" id="rRound">0/5</div></div>
    </div>

    <div class="reaction-arena s-wait" id="reactArena">
      <div class="arena-icon" id="rIcon">âš¡</div>
      <div class="arena-text" id="rText">Tap to Start</div>
      <div class="arena-sub"  id="rSub">Test your reaction speed</div>
    </div>

    <div>
      <div class="slbl" style="margin-bottom:8px" id="lDots">Round Progress</div>
      <div class="dots-row" id="rdots">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        <div class="dot"></div><div class="dot"></div>
      </div>
    </div>

    <div class="hist-row" id="hist"></div>

    <div class="gameover" id="gover">
      <div class="go-title" id="goTitle">ğŸ† GAME OVER</div>
      <div class="go-stats">
        <div class="go-stat"><div class="go-slbl" id="goLB">Fastest</div><div class="go-sval" id="goBest">---</div></div>
        <div class="go-stat"><div class="go-slbl" id="goLA">Average</div><div class="go-sval" id="goAvg">---</div></div>
        <div class="go-stat"><div class="go-slbl" id="goLS">Score</div><div class="go-sval" id="goScore">0</div></div>
      </div>
      <button class="replay-btn" id="replayBtn">â†º Play Again</button>
    </div>

  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: STIMULATION CLICKER
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-stimulation" class="game-zone" style="display:none">

    <div class="gtitle-row">
      <h1 class="gtitle red">Stimulation Clicker</h1>
      <span class="gsub">Click the targets before they disappear</span>
    </div>

    <div class="stats-bar">
      <div class="scard hi4"><div class="slbl">Score</div><div class="sval red" id="stScore">0</div></div>
      <div class="scard"><div class="slbl">Targets Hit</div><div class="sval" id="stHits">0</div></div>
      <div class="scard hi2"><div class="slbl">Accuracy</div><div class="sval yellow" id="stAcc">â€”</div></div>
      <div class="scard hi3"><div class="slbl">Time Left</div><div class="sval purple" id="stTime">30.0</div></div>
    </div>

    <div class="stim-arena" id="stimArena">

      <!-- Idle / config screen -->
      <div class="stim-idle" id="stimIdle">
        <div style="font-size:3rem">ğŸ¯</div>
        <div class="stim-idle-title">Stimulation Clicker</div>
        <div class="stim-idle-sub">Choose difficulty and start</div>
        <div class="diff-row">
          <button class="diff-btn easy"   id="dbEasy"   onclick="setStimDiff('easy')">ğŸŸ¢ EASY</button>
          <button class="diff-btn medium selected" id="dbMedium" onclick="setStimDiff('medium')">ğŸŸ¡ MEDIUM</button>
          <button class="diff-btn hard"   id="dbHard"   onclick="setStimDiff('hard')">ğŸ”´ HARD</button>
        </div>
        <button class="stim-start-btn" onclick="startStim()">â–¶ START</button>
      </div>

      <!-- Result overlay -->
      <div class="stim-result" id="stimResult">
        <div class="r-label" style="color:var(--muted)">Final Score</div>
        <div class="stim-r-score" id="stFinalScore"></div>
        <div class="r-label" style="color:var(--muted)">Accuracy: <span id="stFinalAcc"></span></div>
        <div class="stim-r-rank" id="stFinalRank"></div>
        <button class="stim-replay" onclick="resetStim()">â†º Play Again</button>
      </div>

    </div>

    <!-- Difficulty guide -->
    <div class="icard" style="padding:16px 18px">
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px">
        <div style="text-align:center">
          <div style="font-size:1.2rem;margin-bottom:4px">ğŸŸ¢</div>
          <div style="font-size:0.6rem;font-weight:700;color:var(--accent);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:3px">EASY</div>
          <div style="font-size:0.58rem;color:var(--muted);line-height:1.6">80px targets Â· 1.2s lifetime Â· Perfect for beginners</div>
        </div>
        <div style="text-align:center">
          <div style="font-size:1.2rem;margin-bottom:4px">ğŸŸ¡</div>
          <div style="font-size:0.6rem;font-weight:700;color:var(--yellow);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:3px">MEDIUM</div>
          <div style="font-size:0.58rem;color:var(--muted);line-height:1.6">55px targets Â· 0.8s lifetime Â· Standard challenge</div>
        </div>
        <div style="text-align:center">
          <div style="font-size:1.2rem;margin-bottom:4px">ğŸ”´</div>
          <div style="font-size:0.6rem;font-weight:700;color:var(--red);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:3px">HARD</div>
          <div style="font-size:0.58rem;color:var(--muted);line-height:1.6">38px targets Â· 0.5s lifetime Â· Elite aim required</div>
        </div>
      </div>
    </div>

  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: TYPING TEST
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-typing" class="game-zone" style="display:none">
    <div class="gtitle-row">
      <h1 class="gtitle" style="background:linear-gradient(135deg,#00b4d8,#00f5a0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Typing Speed Test</h1>
      <span class="gsub">Type the words as fast as you can â€” WPM &amp; accuracy</span>
    </div>
    <div class="stats-bar">
      <div class="scard hi1"><div class="slbl">WPM</div><div class="sval" id="tWpm" style="color:#00b4d8">0</div></div>
      <div class="scard"><div class="slbl">Accuracy</div><div class="sval muted" id="tAcc">â€”</div></div>
      <div class="scard hi2"><div class="slbl">Correct</div><div class="sval yellow" id="tCorrect">0</div></div>
      <div class="scard hi3"><div class="slbl">Time Left</div><div class="sval purple" id="tTime">60</div></div>
    </div>

    <!-- Word display -->
    <div id="typingBox" style="
      width:100%;max-width:680px;align-self:center;
      background:#090914;border:2px solid var(--border);border-radius:20px;
      padding:28px 24px;display:flex;flex-direction:column;gap:16px;position:relative;
    ">
      <div id="tWords" style="
        font-family:'JetBrains Mono',monospace;font-size:clamp(0.9rem,2.5vw,1.1rem);
        line-height:2.2;letter-spacing:0.03em;
        display:flex;flex-wrap:wrap;gap:6px;
        max-height:120px;overflow:hidden;
        pointer-events:none;user-select:none;
      "></div>
      <input id="tInput" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
        placeholder="Click here and start typing..."
        style="
          width:100%;background:var(--surf2);border:1.5px solid var(--border2);
          border-radius:10px;padding:12px 16px;
          font-family:'JetBrains Mono',monospace;font-size:0.85rem;
          color:var(--text);outline:none;transition:border-color 0.2s;
        "
      >
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px">
        <div style="display:flex;gap:8px">
          <button onclick="setTypingDuration(30)" id="td30" class="tbtn" style="font-size:0.6rem">30s</button>
          <button onclick="setTypingDuration(60)" id="td60" class="tbtn active" style="font-size:0.6rem">60s</button>
          <button onclick="setTypingDuration(120)" id="td120" class="tbtn" style="font-size:0.6rem">120s</button>
        </div>
        <button onclick="resetTyping()" style="
          padding:8px 20px;background:var(--surf);border:1px solid var(--border2);
          border-radius:8px;color:var(--muted);cursor:pointer;
          font-family:'JetBrains Mono',monospace;font-size:0.6rem;font-weight:700;
          transition:all 0.15s;
        ">â†º Restart</button>
      </div>
      <!-- Result overlay -->
      <div id="tResult" style="
        display:none;position:absolute;inset:0;z-index:10;border-radius:18px;
        background:rgba(6,6,14,0.93);flex-direction:column;
        align-items:center;justify-content:center;gap:10px;text-align:center;padding:20px;
      ">
        <div style="font-size:0.58rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--muted)">Your Speed</div>
        <div id="tFinalWpm" style="font-family:'Bebas Neue',sans-serif;font-size:clamp(4rem,15vw,8rem);line-height:1;color:#00b4d8"></div>
        <div style="font-size:0.58rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--muted)">Words Per Minute</div>
        <div id="tFinalAcc" style="font-size:0.7rem;color:var(--accent);letter-spacing:0.1em"></div>
        <button onclick="resetTyping()" style="
          margin-top:8px;padding:12px 36px;background:#00b4d8;color:#000;
          border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;
          font-size:1.1rem;letter-spacing:0.15em;cursor:pointer;transition:all 0.2s;
        ">â†º Try Again</button>
      </div>
    </div>
  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: COREBALL
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-coreball" class="game-zone" style="display:none">
    <div class="gtitle-row">
      <h1 class="gtitle" style="background:linear-gradient(135deg,#ff6b00,#ffe000);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Coreball Game</h1>
      <span class="gsub">Shoot balls into the spinning core â€” don't hit existing balls</span>
    </div>
    <div class="stats-bar">
      <div class="scard hi4"><div class="slbl">Score</div><div class="sval red" id="cbScore">0</div></div>
      <div class="scard hi2"><div class="slbl">Best</div><div class="sval yellow" id="cbBest">0</div></div>
      <div class="scard"><div class="slbl">Level</div><div class="sval muted" id="cbLevel">1</div></div>
      <div class="scard hi3"><div class="slbl">Balls Left</div><div class="sval purple" id="cbBalls">10</div></div>
    </div>

    <div style="width:100%;max-width:480px;align-self:center;display:flex;flex-direction:column;gap:12px">
      <canvas id="coreCanvas" width="480" height="480" style="
        width:100%;border-radius:20px;
        background:#06060e;border:2px solid var(--border);
        cursor:pointer;touch-action:none;display:block;
      "></canvas>
      <div id="cbMsg" style="text-align:center;font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:0.15em;color:var(--muted)">
        TAP TO SHOOT
      </div>
    </div>
  </div>

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PANEL: DINO GAME
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
  <div id="panel-dino" class="game-zone" style="display:none">
    <div class="gtitle-row">
      <h1 class="gtitle" style="background:linear-gradient(135deg,#666,#ccc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Dinosaur Game</h1>
      <span class="gsub">Press Space or tap to jump â€” avoid cacti and pterodactyls</span>
    </div>
    <div class="stats-bar">
      <div class="scard hi1"><div class="slbl">Score</div><div class="sval" id="dinoScore">0</div></div>
      <div class="scard hi2"><div class="slbl">Best</div><div class="sval yellow" id="dinoBest">0</div></div>
      <div class="scard"><div class="slbl">Speed</div><div class="sval muted" id="dinoSpeed">1x</div></div>
      <div class="scard hi3"><div class="slbl">Status</div><div class="sval purple" id="dinoStatus">Ready</div></div>
    </div>
    <canvas id="dinoCanvas" width="800" height="280" style="
      width:100%;max-width:800px;align-self:center;
      border-radius:16px;background:#111118;border:2px solid var(--border);
      cursor:pointer;display:block;touch-action:none;
    "></canvas>
    <div style="text-align:center;font-size:0.58rem;letter-spacing:0.15em;color:var(--muted);text-transform:uppercase">
      Space / Tap = Jump &nbsp;Â·&nbsp; â†“ / Swipe Down = Duck
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INFO CONTENT SECTION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="info-wrap" id="infoWrap">

    <!-- â•â•â• INFO: REACTION â•â•â• -->
    <div class="info-section" data-info="reaction">
    <div class="sec-divider">ABOUT REACTION TIME TEST</div>
    <article class="icard">
      <h2 class="icard-title">âš¡ What Is a Reaction Time Test?</h2>
      <p class="ibody">A <strong>reaction time test</strong> measures how quickly you respond to a visual stimulus â€” from when your eyes detect a signal to when your hand clicks. Results are in <strong>milliseconds (ms)</strong>. Average human reaction time is <strong>200â€“250ms</strong>, while elite gamers achieve <strong>150â€“200ms</strong>.<br><br>Our free online test runs <strong>5 rounds</strong>, gives ratings from <em>Slow</em> to <em>Legendary</em>, and shows your best, average, and score. No download needed â€” works on any browser.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ“Š Reaction Time Rating Chart</h2>
      <table class="rtable"><thead><tr><th>Time</th><th>Rating</th><th>Who?</th></tr></thead><tbody>
        <tr><td style="color:var(--yellow)">Under 150ms</td><td style="color:var(--yellow)">âš¡ Legendary</td><td style="color:#c8c8e8">Pro esports athletes</td></tr>
        <tr><td style="color:var(--accent)">150â€“200ms</td><td style="color:var(--accent)">ğŸ”¥ Perfect</td><td style="color:#c8c8e8">Top competitive gamers</td></tr>
        <tr><td style="color:var(--accent)">200â€“250ms</td><td style="color:var(--accent)">âœ… Great</td><td style="color:#c8c8e8">Above average, serious player</td></tr>
        <tr><td style="color:var(--purple)">250â€“320ms</td><td style="color:var(--purple)">ğŸ‘ Good</td><td style="color:#c8c8e8">Casual gamer, average adult</td></tr>
        <tr><td style="color:#c8c8e8">320â€“400ms</td><td style="color:#c8c8e8">ğŸ˜ Average</td><td style="color:#c8c8e8">Most non-gamers</td></tr>
        <tr><td style="color:var(--red)">400ms+</td><td style="color:var(--red)">ğŸ¢ Slow</td><td style="color:#c8c8e8">Tired, distracted or first try</td></tr>
      </tbody></table>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ’¡ How to Improve Reaction Time</h2>
      <p class="ibody"><strong>Sleep:</strong> Even 1 hour less sleep adds 50ms+ to reaction time.<br><strong>Practice:</strong> Daily reaction tests build neural pathways over 2â€“4 weeks.<br><strong>Gaming:</strong> Fast-paced FPS games (CS2, Valorant) measurably improve reaction speed.<br><strong>Caffeine:</strong> 100â€“200mg reduces reaction time by 10â€“30ms temporarily.<br><strong>Monitor:</strong> A 144Hz+ monitor with low latency reduces visual delay significantly.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸŒ Reaction Time World Records</h2>
      <table class="rtable"><thead><tr><th>Category</th><th>Record</th><th>Notes</th></tr></thead><tbody>
        <tr><td style="color:var(--accent)">Visual Reaction</td><td style="color:var(--yellow)">~100ms</td><td style="color:#c8c8e8">Fastest recorded human visual response</td></tr>
        <tr><td style="color:var(--accent)">100m Sprint Start</td><td style="color:var(--yellow)">101ms</td><td style="color:#c8c8e8">Usain Bolt, 2011 World Championships</td></tr>
        <tr><td style="color:var(--accent)">Average Pro Gamer</td><td style="color:var(--yellow)">150â€“190ms</td><td style="color:#c8c8e8">CS2, Valorant top 0.1% players</td></tr>
        <tr><td style="color:var(--accent)">Average Adult</td><td style="color:var(--yellow)">200â€“250ms</td><td style="color:#c8c8e8">Healthy, alert, non-gamer</td></tr>
        <tr><td style="color:var(--accent)">F1 Driver Start</td><td style="color:var(--yellow)">~200ms</td><td style="color:#c8c8e8">Average across the grid</td></tr>
      </tbody></table>
      <p class="ibody" style="margin-top:12px"><strong>Note:</strong> Results on this site include mouse hardware latency (~5â€“15ms) and monitor display delay (~1â€“8ms). Your true neural reaction time is slightly faster than what you see here.</p>
    </article>
    <div class="sec-divider">FAQ â€” REACTION TIME</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is a good reaction time? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Average: <strong>200â€“250ms</strong>. Excellent: under <strong>200ms</strong>. Elite (pro gamers): under <strong>150ms</strong>.</div></div>
      <div class="faq-item"><button class="faq-q">Why does my reaction time vary? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Reaction time varies with <strong>fatigue, focus, and anticipation</strong>. Multiple rounds average out variance â€” 5 rounds gives a reliable score.</div></div>
      <div class="faq-item"><button class="faq-q">Does gaming improve reaction time? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Yes. Action games improve <strong>visual processing speed</strong>. Studies show gamers react 50â€“100ms faster than non-gamers on average.</div></div>
      <div class="faq-item"><button class="faq-q">What is the fastest human reaction time? <span class="faq-arrow">â–¼</span></button><div class="faq-a">The world record visual reaction time is approximately <strong>100ms</strong>. For sprinters, the minimum legal reaction time in the 100m dash is 100ms (anything faster is considered a false start).</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: STIMULATION â•â•â• -->
    <div class="info-section" data-info="stimulation" style="display:none">
    <div class="sec-divider">ABOUT STIMULATION CLICKER</div>
    <article class="icard">
      <h2 class="icard-title">ğŸ¯ What Is the Stimulation Clicker?</h2>
      <p class="ibody">The <strong>Stimulation Clicker</strong> is an aim training game where colorful targets appear at random positions and you must click them before they disappear. It combines <strong>clicking speed</strong> with <strong>spatial precision</strong> â€” the same skill set required in FPS games like CS2, Valorant, and Fortnite.<br><br>It is directly inspired by professional aim trainers like <strong>Aimlabs</strong> and <strong>KovaaK's</strong>, designed to build mouse accuracy under time pressure.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ® Difficulty Levels</h2>
      <table class="rtable"><thead><tr><th>Level</th><th>Target Size</th><th>Lifetime</th><th>Best For</th></tr></thead><tbody>
        <tr><td style="color:var(--accent)">ğŸŸ¢ Easy</td><td style="color:#c8c8e8">80px</td><td style="color:#c8c8e8">1.2 seconds</td><td style="color:#c8c8e8">Beginners, warm-up</td></tr>
        <tr><td style="color:var(--yellow)">ğŸŸ¡ Medium</td><td style="color:#c8c8e8">55px</td><td style="color:#c8c8e8">0.8 seconds</td><td style="color:#c8c8e8">Standard aim training</td></tr>
        <tr><td style="color:var(--red)">ğŸ”´ Hard</td><td style="color:#c8c8e8">38px</td><td style="color:#c8c8e8">0.5 seconds</td><td style="color:#c8c8e8">Elite aim, comparable to Aimlabs Gridshot</td></tr>
      </tbody></table>
    </article>
    <div class="sec-divider">FAQ â€” STIMULATION CLICKER</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">Does stimulation clicker help in real games? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Yes. The mechanics directly mirror FPS target acquisition. <strong>Hard mode</strong> is comparable to professional aim trainer scenarios. Regular practice improves flick-shot accuracy in CS2 and Valorant.</div></div>
      <div class="faq-item"><button class="faq-q">What is a good stimulation clicker score? <span class="faq-arrow">â–¼</span></button><div class="faq-a">On Medium difficulty: <strong>1500+ points</strong> is average, <strong>3500+</strong> is skilled, <strong>6000+</strong> is elite. Hard mode scores above 3500 indicate pro-level aim.</div></div>
      <div class="faq-item"><button class="faq-q">How long should I train with Stimulation Clicker? <span class="faq-arrow">â–¼</span></button><div class="faq-a"><strong>15â€“20 minutes daily</strong> is optimal. More than 30 minutes causes fatigue that reduces accuracy. Consistent daily practice beats long occasional sessions.</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: CPS / JITTER â•â•â• -->
    <div class="info-section" data-info="cps" style="display:none">
    <div class="sec-divider">ABOUT CLICK SPEED TEST</div>
    <article class="icard">
      <h2 class="icard-title">ğŸ–±ï¸ What Is a CPS Test?</h2>
      <p class="ibody">A <strong>Click Speed Test</strong> (CPS Test) measures how many times you can click per second. It's the core benchmark for competitive gaming, especially <strong>Minecraft PvP</strong>, where raw clicking speed gives a combat advantage. Our free CPS test offers <strong>8 time durations</strong> (1s to 100s) and includes Normal and Challenge modes.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ† CPS Ranking Table</h2>
      <table class="rtable"><thead><tr><th>Rank</th><th>CPS</th><th>Level</th></tr></thead><tbody>
        <tr><td style="color:#b0b0d0">ğŸ¢ Turtle</td><td style="color:#b0b0d0">1â€“4</td><td style="color:#b0b0d0">Beginner</td></tr>
        <tr><td style="color:var(--purple)">ğŸ‡ Normal</td><td style="color:var(--purple)">5â€“7</td><td style="color:var(--purple)">Average</td></tr>
        <tr><td style="color:var(--accent)">âš¡ Fast</td><td style="color:var(--accent)">8â€“10</td><td style="color:var(--accent)">Good</td></tr>
        <tr><td style="color:var(--yellow)">ğŸ† Cheetah</td><td style="color:var(--yellow)">11â€“14</td><td style="color:var(--yellow)">Pro</td></tr>
        <tr><td style="color:var(--red)">âš¡ God Mode</td><td style="color:var(--red)">15+</td><td style="color:var(--red)">Elite</td></tr>
      </tbody></table>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ–± Clicking Techniques</h2>
      <div class="tech-grid">
        <div class="tcard"><div class="thead-row"><span class="tname">Regular Clicking</span><span class="tbadge p">3â€“9 CPS</span></div><p class="tbody-t">Standard one-finger method. Best aim accuracy. Sustainable for all durations including 100s.</p></div>
        <div class="tcard"><div class="thead-row"><span class="tname">Jitter Clicking</span><span class="tbadge g">10â€“14 CPS</span></div><p class="tbody-t">Tense forearm and wrist to create rapid vibrations. Learnable with practice. Risk of wrist strain â€” take breaks every 15 min.</p></div>
        <div class="tcard"><div class="thead-row"><span class="tname">Butterfly Clicking</span><span class="tbadge y">15â€“25 CPS</span></div><p class="tbody-t">Two fingers alternate on the same button. World record: <strong>25.5 CPS (Nestor, 2022)</strong>. Often banned in competitive servers.</p></div>
        <div class="tcard"><div class="thead-row"><span class="tname">Drag Clicking</span><span class="tbadge r">30â€“100+ CPS</span></div><p class="tbody-t">Drag finger across button creating friction micro-clicks. Universally banned in competitive play.</p></div>
      </div>
    </article>
    <div class="sec-divider">FAQ â€” CLICK SPEED</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is a good CPS score? <span class="faq-arrow">â–¼</span></button><div class="faq-a"><strong>6â€“7 CPS</strong> is average. Above <strong>10 CPS</strong> is good. Above <strong>14 CPS</strong> requires jitter or butterfly technique.</div></div>
      <div class="faq-item"><button class="faq-q">What is the world record CPS? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Regular: <strong>14.1 CPS (Dylan Allred, 2020)</strong>. Jitter: <strong>16.2 CPS</strong>. Butterfly: <strong>25.5 CPS (Nestor, 2022)</strong>.</div></div>
      <div class="faq-item"><button class="faq-q">Is jitter clicking harmful? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Extended sessions can cause <strong>wrist strain and carpal tunnel</strong>. Take breaks every 10â€“15 minutes. Stop if you feel pain.</div></div>
      <div class="faq-item"><button class="faq-q">Does a better mouse improve CPS? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Yes. A gaming mouse with <strong>1000Hz polling rate</strong> and low debounce registers clicks faster. Most players gain 0.5â€“2 CPS from upgrading.</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: SPACEBAR â•â•â• -->
    <div class="info-section" data-info="spacebar" style="display:none">
    <div class="sec-divider">ABOUT SPACEBAR TEST</div>
    <article class="icard">
      <h2 class="icard-title">âŒ¨ï¸ What Is the Spacebar Speed Test?</h2>
      <p class="ibody">The <strong>Spacebar Speed Test</strong> measures how many times per second you can press the spacebar. It's popular among <strong>rhythm game players</strong> (osu!, Beat Saber) and keyboard enthusiasts. Unlike mouse clicking, spacebar speed depends heavily on keyboard switch type and finger placement technique.<br><br>Our test supports 8 durations (1sâ€“100s) and counts only new presses â€” holding down the spacebar does not register multiple presses.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">âŒ¨ï¸ Spacebar Speed Rankings</h2>
      <table class="rtable"><thead><tr><th>Presses/sec</th><th>Rating</th></tr></thead><tbody>
        <tr><td style="color:#b0b0d0">1â€“4</td><td style="color:#b0b0d0">ğŸ¢ Slow</td></tr>
        <tr><td style="color:var(--purple)">5â€“7</td><td style="color:var(--purple)">ğŸ‘ Average</td></tr>
        <tr><td style="color:var(--accent)">8â€“10</td><td style="color:var(--accent)">âš¡ Fast</td></tr>
        <tr><td style="color:var(--yellow)">11+</td><td style="color:var(--yellow)">ğŸ† Elite</td></tr>
      </tbody></table>
    </article>
    <div class="sec-divider">FAQ â€” SPACEBAR</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is a good spacebar speed? <span class="faq-arrow">â–¼</span></button><div class="faq-a"><strong>6â€“8 presses per second</strong> is average. Above 10 presses/sec is exceptional and typically requires a mechanical keyboard with linear switches.</div></div>
      <div class="faq-item"><button class="faq-q">Does keyboard type affect spacebar speed? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Yes significantly. <strong>Linear mechanical switches</strong> (Red, Speed Silver) allow faster actuation than membrane keyboards. Switch actuation force and travel distance directly impact speed.</div></div>
      <div class="faq-item"><button class="faq-q">Why doesn't holding spacebar count? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Browsers fire repeated keydown events when a key is held. We filter these with <code>e.repeat</code> detection â€” only actual new presses count, making the test fair and accurate.</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: TYPING â•â•â• -->
    <div class="info-section" data-info="typing" style="display:none">
    <div class="sec-divider">ABOUT TYPING SPEED TEST</div>
    <article class="icard">
      <h2 class="icard-title">ğŸ“ What Is a Typing Speed Test (WPM)?</h2>
      <p class="ibody">A <strong>Typing Speed Test</strong> measures your typing speed in <strong>WPM (Words Per Minute)</strong> and accuracy. The standard WPM formula counts each 5 characters as one "word." Our test uses real English words, tracks correct/incorrect entries, and gives live WPM feedback.<br><br>Choose <strong>30s, 60s, or 120s</strong> modes. Average typing speed is <strong>40â€“50 WPM</strong>. Professional typists reach 70â€“100+ WPM.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">âŒ¨ï¸ WPM Rankings</h2>
      <table class="rtable"><thead><tr><th>WPM</th><th>Level</th></tr></thead><tbody>
        <tr><td style="color:#b0b0d0">Under 30</td><td style="color:#b0b0d0">ğŸ¢ Beginner</td></tr>
        <tr><td style="color:var(--purple)">30â€“50</td><td style="color:var(--purple)">ğŸ‘ Average</td></tr>
        <tr><td style="color:var(--accent)">50â€“70</td><td style="color:var(--accent)">âš¡ Good</td></tr>
        <tr><td style="color:var(--yellow)">70â€“100</td><td style="color:var(--yellow)">ğŸ† Fast</td></tr>
        <tr><td style="color:var(--red)">100+</td><td style="color:var(--red)">âš¡ Elite</td></tr>
      </tbody></table>
    </article>
    <div class="sec-divider">FAQ â€” TYPING TEST</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is average typing speed? <span class="faq-arrow">â–¼</span></button><div class="faq-a">The global average is <strong>40â€“50 WPM</strong>. Office professionals average 55â€“70 WPM. Professional typists and stenographers reach 100â€“200+ WPM.</div></div>
      <div class="faq-item"><button class="faq-q">How can I type faster? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Learn <strong>touch typing</strong> (all 10 fingers without looking). Practice 15â€“30 minutes daily. Focus on accuracy first â€” speed comes naturally. Sites like Keybr.com complement our test well.</div></div>
      <div class="faq-item"><button class="faq-q">Does keyboard type affect typing speed? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Yes. <strong>Mechanical keyboards</strong> with tactile feedback help accuracy. Low-profile laptops keys often cause more errors. However, technique matters far more than hardware.</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: COREBALL â•â•â• -->
    <div class="info-section" data-info="coreball" style="display:none">
    <div class="sec-divider">ABOUT COREBALL GAME</div>
    <article class="icard">
      <h2 class="icard-title">ğŸ® How to Play Coreball</h2>
      <p class="ibody">In <strong>Coreball</strong>, a central core spins continuously. You shoot balls from the bottom â€” each ball sticks to the core when it lands. The challenge: <strong>don't let your ball hit an existing ball</strong> already stuck on the core. As you score more, the core spins faster, increasing difficulty.<br><br>Tap or click to shoot. You start with 10 balls. Plan your shots carefully â€” timing is everything.</p>
    </article>
    <article class="icard">
      <h2 class="icard-title">ğŸ¯ Coreball Tips</h2>
      <p class="ibody"><strong>Watch the gaps:</strong> Focus on the spaces between stuck balls, not the balls themselves.<br><strong>Rhythm shooting:</strong> Find the rotation rhythm and shoot in sync.<br><strong>Don't rush:</strong> You have 10 balls â€” patience beats panic.<br><strong>Higher levels:</strong> Speed increases every 10 points. Adjust your timing accordingly.</p>
    </article>
    <div class="sec-divider">FAQ â€” COREBALL</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is the Coreball game? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Coreball is a precision timing game where you shoot balls onto a spinning core without hitting existing balls. It tests <strong>timing, patience, and spatial awareness</strong>.</div></div>
      <div class="faq-item"><button class="faq-q">What is a good Coreball score? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Scoring <strong>10+ points</strong> without a miss is good. Above <strong>20</strong> is excellent. The game gets significantly harder past level 3 as rotation speed increases.</div></div>
    </div></article>
    </div>

    <!-- â•â•â• INFO: DINO â•â•â• -->
    <div class="info-section" data-info="dino" style="display:none">
    <div class="sec-divider">ABOUT DINOSAUR GAME</div>
    <article class="icard">
      <h2 class="icard-title">ğŸ¦• How to Play the Dinosaur Game</h2>
      <p class="ibody">The <strong>Dinosaur Game</strong> (also known as the Chrome Dino or T-Rex Runner) is a classic endless runner. Press <strong>Space or tap</strong> to jump over cacti and duck under pterodactyls. The game speeds up over time â€” how far can you run?<br><br>This tests your <strong>reaction time and rhythm</strong> under escalating pressure, making it a fun complement to the reaction time test.</p>
    </article>
    <div class="sec-divider">FAQ â€” DINO GAME</div>
    <article class="icard"><div class="faq-list">
      <div class="faq-item"><button class="faq-q">What is the Chrome Dinosaur game? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Originally created by Google, the <strong>T-Rex Runner</strong> appears in Chrome when you have no internet. It's now one of the most played browser games in the world, with an estimated 270 million plays per month.</div></div>
      <div class="faq-item"><button class="faq-q">What is a good Dino game score? <span class="faq-arrow">â–¼</span></button><div class="faq-a">Reaching <strong>500 points</strong> is good for beginners. <strong>1000+</strong> is above average. Expert players regularly score <strong>5000â€“10000+</strong>. The theoretical maximum score is 99999.</div></div>
    </div></article>
    </div>

    <footer class="sfooter">
      <p class="ibody">
        A <strong>reaction time test</strong> measures how quickly you respond to a visual stimulus â€” from when your eyes detect a signal to when your hand clicks. Results are measured in <strong>milliseconds (ms)</strong>. The average human reaction time is <strong>200â€“250ms</strong>, while elite gamers and athletes consistently achieve <strong>150â€“200ms</strong>.<br><br>
        Our free online reaction time test runs <strong>5 rounds</strong>, automatically removes outliers, and gives you your best, average, and a performance rating from <em>Slow</em> to <em>Legendary</em>. No software to install â€” works in any browser on desktop or mobile.
      </p>
    </article>

    <footer class="sfooter">
      <div style="margin-bottom:10px">
        <span style="color:var(--yellow);font-size:0.9rem;letter-spacing:2px">â˜…â˜…â˜…â˜…â˜…</span>
        <span style="color:var(--text);font-size:0.58rem;margin-left:6px">4.8/5 â€” 2,347 ratings</span>
      </div>
      <!-- App meta â€” required visible for Google mobile crawler -->
      <p style="margin-bottom:6px;font-size:0.5rem">
        Platform: <span>Windows, macOS, Linux, Android, iOS</span> &nbsp;Â·&nbsp;
        Category: <span>Game Application</span> &nbsp;Â·&nbsp;
        Price: <span>Free</span> &nbsp;Â·&nbsp;
        Rated: <span>4.8 / 5</span> by <span>2,347</span> users
      </p>
      <p>Â© <span id="footYear"></span> Reaction Speed Test â€” Free Online CPS &amp; Reaction Time Tester</p>
      <p style="margin-top:6px">Test your <strong>reaction time</strong>, <strong>click speed (CPS)</strong>, <strong>jitter click</strong>, <strong>Kohi click</strong>, <strong>spacebar speed</strong>, and <strong>stimulation clicker</strong> aim training for free. No download, no registration. Works on any device.</p>
      <p style="margin-top:6px;font-size:0.48rem">Keywords: reaction time test Â· click speed test Â· CPS test Â· free CPS counter Â· jitter click test Â· kohi click Â· spacebar speed test Â· stimulation clicker Â· online reaction test Â· how fast can I click Â· clicks per second Â· 1 second CPS Â· 10 second click test Â· reaction speed</p>
    </footer>

  </div>
</div><!-- /wrap -->

<script>
'use strict';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let curPanel    = 'cps';
let curDuration = 5;
let clickMode   = 'normal';
let stimDiff    = 'medium';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER / PANEL SWITCHING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchPanel(p) {
  curPanel = p;

  // Tab highlight
  document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.panel === p));

  // Map jitter/kohi â†’ cps panel
  const allPanels = ['cps','spacebar','reaction','stimulation','typing','coreball','dino'];
  allPanels.forEach(id => {
    const el = document.getElementById('panel-' + id);
    if (el) el.style.display = 'none';
  });
  const target = ['jitter','cps'].includes(p) ? 'cps' : p;
  const panelEl = document.getElementById('panel-' + target);
  if (panelEl) { panelEl.style.display = 'flex'; panelEl.style.flexDirection = 'column'; }

  // Row2: hide for reaction, stim, typing, coreball
  const row2 = document.getElementById('row2');
  const hideRow2 = ['reaction','stimulation','typing','coreball','dino'].includes(p);
  row2.classList.toggle('hidden', hideRow2);
  document.querySelector('.wrap').style.paddingTop =
    hideRow2 ? 'var(--row1-h)' : 'var(--header-h)';

  // Update CPS panel title per mode
  const titles = {
    cps:    ['Click Speed Test',  `${curDuration}s â€” click as fast as you can`],
    jitter: ['Jitter Click Test', `${curDuration}s â€” tense & vibrate for max speed`],
  };
  if (titles[p]) {
    document.getElementById('cpsH1').textContent = titles[p][0];
    document.getElementById('cpsSub').textContent = titles[p][1];
  }

  // Reset
  if (target === 'cps')    resetCPS();
  if (p === 'stimulation') resetStim();

  // Switch info section
  const infoMap = { reaction:'reaction', stimulation:'stimulation', cps:'cps', jitter:'cps', spacebar:'spacebar', typing:'typing', coreball:'coreball', dino:'dino' };
  document.querySelectorAll('.info-section').forEach(s => s.style.display = 'none');
  const infoKey = infoMap[p] || 'reaction';
  const infoEl = document.querySelector(`.info-section[data-info="${infoKey}"]`);
  if (infoEl) infoEl.style.display = 'block';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DURATION SELECTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setDuration(s) {
  curDuration = s;
  document.querySelectorAll('.tbtn').forEach(b => b.classList.toggle('active', +b.dataset.s === s));
  document.getElementById('cTime').textContent = s.toFixed(1);
  document.getElementById('sTime').textContent = s.toFixed(1);
  // Update subtitle
  const sub = document.getElementById('cpsSub');
  if (sub) {
    const map = { cps:'click as fast as you can', jitter:'tense & vibrate for max speed' };
    sub.textContent = `${s}s â€” ${map[curPanel] || 'click as fast as you can'}`;
  }
  const sSub = document.getElementById('sSub');
  if (sSub) sSub.textContent = `${s} seconds â€” press spacebar as fast as you can`;
  resetCPS();
  resetSpace();
}

function setClickMode(m) {
  clickMode = m;
  document.getElementById('modeNormal').classList.toggle('active', m === 'normal');
  document.getElementById('modeChallenge').classList.toggle('active', m === 'challenge');
  document.getElementById('challengeTip').style.display = m === 'challenge' ? 'block' : 'none';
  resetCPS();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CPS GAME ENGINE (shared: cps / jitter / kohi)
   Includes working Challenge Mode
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CPS_RANKS = [
  { min:15, label:'âš¡ GOD MODE', color:'#ff2d55' },
  { min:11, label:'ğŸ† CHEETAH',  color:'#ffe000' },
  { min:8,  label:'âš¡ FAST',     color:'#00f5a0' },
  { min:5,  label:'ğŸ‡ NORMAL',   color:'#7b61ff' },
  { min:0,  label:'ğŸ¢ TURTLE',   color:'#50507a' },
];
function getCPSRank(c) { return CPS_RANKS.find(r => c >= r.min) || CPS_RANKS[CPS_RANKS.length-1]; }

let cg = { clicks:0, running:false, ts:null, iv:null, best:0, combo:0, chTargets:[], chSpawnTimer:null };

const clickArena = document.getElementById('clickArena');
const bigCPS     = document.getElementById('bigCPS');
const cLabel     = document.getElementById('cLabel');
const cProg      = document.getElementById('cProg');
const cProgFill  = document.getElementById('cProgFill');
const cResult    = document.getElementById('cResult');
const rScore     = document.getElementById('rScore');
const rRank      = document.getElementById('rRank');
const comboBadge = document.getElementById('comboBadge');

function resetCPS() {
  clearInterval(cg.iv);
  clearTimeout(cg.chSpawnTimer);
  cg.chTargets.forEach(t => { clearTimeout(t.timer); if(t.el.parentNode) t.el.parentNode.removeChild(t.el); });
  cg = { clicks:0, running:false, ts:null, iv:null, best:0, combo:0, chTargets:[], chSpawnTimer:null };
  clickArena.className = 'click-arena idle';
  bigCPS.textContent = '0'; bigCPS.style.color = 'var(--accent)';
  cLabel.textContent = 'Click Here to Start';
  cProg.style.display = 'none'; cProgFill.style.width = '100%';
  cResult.classList.remove('show');
  comboBadge.classList.remove('show');
  bigCPS.style.opacity  = '';
  cLabel.style.opacity  = '';
  cProg.style.opacity   = '';
  document.getElementById('cStat').textContent = '0';
  document.getElementById('cClicks').textContent = '0';
  document.getElementById('cBest').textContent = 'â€”';
  document.getElementById('cTime').textContent = curDuration.toFixed(1);
}

/* Challenge mode: spawn small targets inside the arena that must be clicked */
function spawnChallengeTarget() {
  if (!cg.running || clickMode !== 'challenge') return;
  const W = clickArena.clientWidth, H = clickArena.clientHeight;
  const s = 44;
  const x = 14 + Math.random() * (W - s - 28);
  const y = 14 + Math.random() * (H - s - 28);

  const colors = ['#ff2d55','#ff6b00','#ffe000','#00f5a0','#7b61ff'];
  const col = colors[Math.floor(Math.random()*colors.length)];

  const el = document.createElement('div');
  el.className = 'ch-target';
  el.style.cssText = `left:${x}px;top:${y}px;width:${s}px;height:${s}px;background:${col}22;border:2.5px solid ${col};`;
  el.textContent = 'âœ•';

  // Shrinking ring shows time pressure
  const ring = document.createElement('div');
  ring.className = 'ch-shrink-ring';
  ring.style.animationDuration = '0.9s';
  el.appendChild(ring);

  const tObj = { el, hit:false, timer:null };
  cg.chTargets.push(tObj);

  el.addEventListener('click', e => {
    e.stopPropagation();
    if (tObj.hit) return;
    tObj.hit = true; clearTimeout(tObj.timer);
    cg.combo++;
    comboBadge.textContent = `âš¡ COMBO Ã—${cg.combo}`;
    comboBadge.classList.add('show');
    // Bonus click
    cg.clicks += Math.min(cg.combo, 5);
    el.style.transform = 'scale(1.5)'; el.style.opacity = '0';
    setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 100);
    cg.chTargets = cg.chTargets.filter(t => t !== tObj);
  });

  // Auto-expire
  tObj.timer = setTimeout(() => {
    if (!tObj.hit && el.parentNode) {
      el.parentNode.removeChild(el);
      cg.combo = 0;
      comboBadge.textContent = 'MISS! Combo Reset';
      setTimeout(() => comboBadge.classList.remove('show'), 800);
    }
    cg.chTargets = cg.chTargets.filter(t => t !== tObj);
  }, 950);

  clickArena.appendChild(el);

  // Next spawn â€” faster as time progresses
  const elapsed = cg.ts ? (Date.now() - cg.ts) / 1000 : 0;
  const spawnDelay = Math.max(500, 1200 - elapsed * 10);
  cg.chSpawnTimer = setTimeout(spawnChallengeTarget, spawnDelay);
}

function cgTick() {
  const elapsed = (Date.now() - cg.ts) / 1000;
  const rem = Math.max(0, curDuration - elapsed);
  const cps = elapsed > 0 ? +(cg.clicks / Math.max(elapsed, 0.01)).toFixed(2) : 0;
  bigCPS.textContent = cps.toFixed(1);
  document.getElementById('cStat').textContent = cps.toFixed(1);
  document.getElementById('cClicks').textContent = cg.clicks;
  document.getElementById('cTime').textContent = rem.toFixed(1);
  cProgFill.style.width = (rem / curDuration * 100) + '%';
  if (cps > cg.best) { cg.best = cps; document.getElementById('cBest').textContent = cps.toFixed(1); }
  if (rem <= 0) cgFinish();
}

function cgFinish() {
  clearInterval(cg.iv); cg.running = false;
  clearTimeout(cg.chSpawnTimer);
  cg.chTargets.forEach(t => { clearTimeout(t.timer); if(t.el.parentNode) t.el.parentNode.removeChild(t.el); });
  cg.chTargets = [];
  comboBadge.classList.remove('show');
  const elapsed = Math.min(curDuration, (Date.now() - cg.ts) / 1000);
  const final = +(cg.clicks / Math.max(elapsed, 0.01)).toFixed(2);
  bigCPS.textContent = final.toFixed(1);
  document.getElementById('cTime').textContent = '0.0';
  cProgFill.style.width = '0%';
  clickArena.className = 'click-arena done';
  const rank = getCPSRank(final);
  rScore.textContent = final.toFixed(1);
  rScore.style.color = rank.color;
  rRank.textContent = rank.label;
  rRank.style.cssText = `color:${rank.color};background:${rank.color}20;border:1px solid ${rank.color}55`;
  cResult.classList.add('show');
  /* Fade out background elements so they don't bleed through the overlay */
  bigCPS.style.opacity = '0.07';
  cLabel.style.opacity = '0.04';
  cProg.style.opacity  = '0.04';
}

function cgClick(e) {
  if (e && e.target && e.target.classList.contains('ch-target')) return; // let target handle it
  if (cResult.classList.contains('show')) return;
  if (!cg.running) {
    cg.running = true; cg.ts = Date.now(); cg.clicks = 0;
    if (clickMode === 'challenge') {
      clickArena.className = 'click-arena running challenge-active';
      cLabel.textContent = 'âš¡ Hit targets for combos!';
      comboBadge.classList.add('show');
      comboBadge.textContent = 'CHALLENGE MODE!';
      setTimeout(spawnChallengeTarget, 600);
    } else {
      clickArena.className = 'click-arena running';
      cLabel.textContent = 'Keep clicking!';
    }
    cProg.style.display = 'block';
    cg.iv = setInterval(cgTick, 80);
  }
  cg.clicks++;
  cgTick();
}

clickArena.addEventListener('click', cgClick);
clickArena.addEventListener('touchstart', e => { e.preventDefault(); cgClick(e); }, {passive:false});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPACEBAR GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let sg = { clicks:0, running:false, ts:null, iv:null, best:0 };

const spaceArena = document.getElementById('spaceArena');
const spaceKey   = document.getElementById('spaceKey');
const sBig       = document.getElementById('sBig');
const sLabel     = document.getElementById('sLabel');
const sProg      = document.getElementById('sProg');
const sProgFill  = document.getElementById('sProgFill');
const sResult    = document.getElementById('sResult');

function resetSpace() {
  clearInterval(sg.iv);
  sg = { clicks:0, running:false, ts:null, iv:null, best:0 };
  spaceArena.className = 'click-arena idle';
  sBig.textContent = '0';
  sLabel.textContent = 'Press Space Key or Tap Above to Start';
  sProg.style.display = 'none'; sProgFill.style.width = '100%';
  sResult.classList.remove('show');
  sBig.style.opacity   = '';
  sLabel.style.opacity = '';
  sProg.style.opacity  = '';
  document.getElementById('sCPS').textContent = '0';
  document.getElementById('sClicks').textContent = '0';
  document.getElementById('sBest').textContent = 'â€”';
  document.getElementById('sTime').textContent = curDuration.toFixed(1);
}

function sgTick() {
  const elapsed = (Date.now() - sg.ts) / 1000;
  const rem = Math.max(0, curDuration - elapsed);
  const cps = +(sg.clicks / Math.max(elapsed, 0.01)).toFixed(2);
  sBig.textContent = cps.toFixed(1);
  document.getElementById('sCPS').textContent = cps.toFixed(1);
  document.getElementById('sClicks').textContent = sg.clicks;
  document.getElementById('sTime').textContent = rem.toFixed(1);
  sProgFill.style.width = (rem / curDuration * 100) + '%';
  if (cps > sg.best) { sg.best = cps; document.getElementById('sBest').textContent = cps.toFixed(1); }
  if (rem <= 0) sgFinish();
}

function sgFinish() {
  clearInterval(sg.iv); sg.running = false;
  const elapsed = Math.min(curDuration, (Date.now() - sg.ts) / 1000);
  const final = +(sg.clicks / Math.max(elapsed, 0.01)).toFixed(2);
  sBig.textContent = final.toFixed(1);
  document.getElementById('sTime').textContent = '0.0';
  sProgFill.style.width = '0%';
  spaceArena.className = 'click-arena done';
  document.getElementById('srScore').textContent = final.toFixed(1);
  sResult.classList.add('show');
  sBig.style.opacity   = '0.07';
  sLabel.style.opacity = '0.04';
  sProg.style.opacity  = '0.04';
}

function sgClick() {
  if (sResult.classList.contains('show')) return;
  if (!sg.running) {
    sg.running = true; sg.ts = Date.now(); sg.clicks = 0;
    spaceArena.className = 'click-arena running';
    sLabel.textContent = 'Keep pressing!';
    sProg.style.display = 'block';
    sg.iv = setInterval(sgTick, 80);
  }
  sg.clicks++;
  sgTick();
}

spaceArena.addEventListener('click', sgClick);
spaceArena.addEventListener('touchstart', e => { e.preventDefault(); sgClick(); }, {passive:false});
spaceKey.addEventListener('click', sgClick);
spaceKey.addEventListener('touchstart', e => { e.preventDefault(); sgClick(); }, {passive:false});
document.addEventListener('keydown', e => {
  if (e.code === 'Space' && curPanel === 'spacebar') {
    e.preventDefault();
    if (e.repeat) return; // ignore held-down key repeats
    spaceKey.classList.add('down');
    sgClick();
  }
});
document.addEventListener('keyup', e => { if (e.code === 'Space') spaceKey.classList.remove('down'); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REACTION GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ROUNDS = 5, DMIN = 1500, DMAX = 4500;
let rState = 'idle', rStartMs = 0, rTimer = null, rRound = 0, rResults = [], rScore2 = 0;

const reactArena = document.getElementById('reactArena');
const rIcon = document.getElementById('rIcon');
const rText = document.getElementById('rText');
const rSub  = document.getElementById('rSub');
const rDisp = document.getElementById('rDisp');
const rBest = document.getElementById('rBest');
const rAvg  = document.getElementById('rAvg');
const rRound2 = document.getElementById('rRound');
const rdots = document.getElementById('rdots').children;
const hist  = document.getElementById('hist');
const gover = document.getElementById('gover');

function setRArena(icon, text, sub, cls) {
  rIcon.textContent = icon; rText.textContent = text; rSub.textContent = sub;
  reactArena.className = 'reaction-arena ' + cls;
}
function updateDots() {
  for (let i = 0; i < ROUNDS; i++) {
    rdots[i].className = 'dot';
    if (i < rResults.length) rdots[i].classList.add(rResults[i]==='early'?'fail':'done');
    else if (i === rResults.length && rState !== 'gameover') rdots[i].classList.add('current');
  }
}
function rRating(ms) {
  const r = [
    {l:150,t:'âš¡ LEGENDARY',c:'#ffe000'},{l:200,t:'ğŸ”¥ PERFECT',c:'#00f5a0'},
    {l:250,t:'âœ… GREAT',c:'#00f5a0'},{l:320,t:'ğŸ‘ GOOD',c:'#80f0c0'},
    {l:400,t:'ğŸ˜ AVERAGE',c:'#aaaacc'},{l:Infinity,t:'ğŸ¢ SLOW',c:'#ff6b00'}
  ];
  return r.find(x => ms < x.l);
}
function rPts(ms){ return ms<150?1000:ms<200?800:ms<250?600:ms<320?400:ms<400?200:100; }
function updateRStats() {
  const valid = rResults.filter(r=>r!=='early');
  const avg = valid.length ? Math.round(valid.reduce((a,b)=>a+b,0)/valid.length) : null;
  const best = valid.length ? Math.min(...valid) : null;
  const sv = v => v!==null ? v+'ms' : '---';
  rDisp.textContent = rScore2;
  rBest.textContent = sv(best);
  rAvg.textContent  = sv(avg);
  rRound2.textContent = rRound+'/'+ROUNDS;
}
function addChip(ms, isBest, isFail) {
  const c = document.createElement('div');
  c.className = 'hchip'+(isFail?' fail':isBest?' best':'');
  c.textContent = isFail ? 'EARLY' : ms+'ms';
  hist.appendChild(c);
}

function startRound() {
  if (rRound >= ROUNDS) { endReaction(); return; }
  rState = 'waiting';
  setRArena('â³','Wait...','Tap when it turns green!','s-ready'); updateDots();
  rTimer = setTimeout(()=>{
    rState='ready'; rStartMs=Date.now();
    setRArena('ğŸŸ¢','TAP NOW!','Hit it!','s-go');
  }, DMIN + Math.random()*(DMAX-DMIN));
}

function handleReactionTap() {
  if (rState==='idle'||rState==='gameover') { resetReaction(); setTimeout(startRound,600); return; }
  if (rState==='waiting') {
    clearTimeout(rTimer); rState='early';
    rResults.push('early'); rRound++;
    rScore2 = Math.max(0, rScore2-200);
    setRArena('ğŸ’¥','TOO EARLY!','-200 pts â€” Be more patient','s-early');
    addChip(null,false,true); updateRStats(); updateDots();
    setTimeout(()=>startRound(),1600); return;
  }
  if (rState==='ready') {
    const ms = Date.now()-rStartMs; rState='result';
    const pts = rPts(ms); rScore2+=pts; rResults.push(ms); rRound++;
    const valid = rResults.filter(r=>r!=='early');
    const isBest = valid.length===1||ms===Math.min(...valid);
    const rat = rRating(ms);
    addChip(ms,isBest,false); updateRStats(); updateDots();
    rIcon.textContent = 'âœ…';
    rText.innerHTML = `<span class="ms-big">${ms}</span>`;
    rSub.innerHTML  = `<span class="ms-unit">MILLISECONDS</span>`;
    reactArena.className = 'reaction-arena s-done';
    const pill = document.createElement('div');
    pill.className='rat-pill';
    pill.style.cssText=`background:${rat.c}20;color:${rat.c};border:1px solid ${rat.c}55`;
    pill.textContent=rat.t+`  +${pts} pts`;
    reactArena.appendChild(pill);
    setTimeout(()=>{
      if(pill.parentNode)pill.parentNode.removeChild(pill);
      if(rRound>=ROUNDS)endReaction(); else startRound();
    }, 1400);
  }
}

function endReaction() {
  rState='gameover';
  const valid=rResults.filter(r=>r!=='early');
  const best=valid.length?Math.min(...valid):null;
  const avg=valid.length?Math.round(valid.reduce((a,b)=>a+b,0)/valid.length):null;
  setRArena('ğŸ†','Game Over!','Check your results','s-done');
  let title='ğŸ† GAME OVER';
  if(rScore2>=4000)title='âš¡ LEGENDARY!';
  else if(rScore2>=3000)title='ğŸ”¥ PERFECT!';
  document.getElementById('goTitle').textContent=title;
  document.getElementById('goBest').textContent=best?best+'ms':'---';
  document.getElementById('goAvg').textContent=avg?avg+'ms':'---';
  document.getElementById('goScore').textContent=rScore2;
  gover.classList.add('show'); updateDots();
}

function resetReaction() {
  rResults=[]; rScore2=0; rRound=0; hist.innerHTML='';
  gover.classList.remove('show'); rState='idle';
  setRArena('âš¡','Tap to Start','Test your reaction speed','s-wait');
  rDisp.textContent='0'; rBest.textContent='---'; rAvg.textContent='---'; rRound2.textContent='0/5';
  for(let i=0;i<ROUNDS;i++) rdots[i].className='dot';
}

reactArena.addEventListener('click', handleReactionTap);
reactArena.addEventListener('touchstart', e=>{e.preventDefault();handleReactionTap();},{passive:false});
document.getElementById('replayBtn').addEventListener('click', ()=>{resetReaction();setTimeout(startRound,600);});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STIMULATION CLICKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const STIM_CONFIGS = {
  easy:   { size:80, lifetime:1200, interval:800,  pts:100 },
  medium: { size:55, lifetime:800,  interval:580,  pts:200 },
  hard:   { size:38, lifetime:500,  interval:380,  pts:400 },
};
const STIM_DURATION = 30;
let stim = { running:false, score:0, hits:0, misses:0, timeLeft:STIM_DURATION, iv:null, spawnTimer:null };
let activeTargets = [];

function setStimDiff(d) {
  stimDiff = d;
  ['easy','medium','hard'].forEach(x => {
    const b = document.getElementById('db'+x.charAt(0).toUpperCase()+x.slice(1));
    b.classList.toggle('selected', x === d);
  });
}

function resetStim() {
  clearInterval(stim.iv); clearTimeout(stim.spawnTimer);
  activeTargets.forEach(t => { clearTimeout(t.expTimer); if(t.el.parentNode) t.el.parentNode.removeChild(t.el); });
  activeTargets = [];
  stim = { running:false, score:0, hits:0, misses:0, timeLeft:STIM_DURATION, iv:null, spawnTimer:null };
  document.getElementById('stScore').textContent = '0';
  document.getElementById('stHits').textContent  = '0';
  document.getElementById('stAcc').textContent   = 'â€”';
  document.getElementById('stTime').textContent  = STIM_DURATION.toFixed(1);
  document.getElementById('stimResult').classList.remove('show');
  document.getElementById('stimIdle').style.display = 'flex';
}

function startStim() {
  document.getElementById('stimIdle').style.display = 'none';
  stim.running = true;
  stim.timeLeft = STIM_DURATION;

  stim.iv = setInterval(() => {
    stim.timeLeft = Math.max(0, +(stim.timeLeft - 0.1).toFixed(1));
    document.getElementById('stTime').textContent = stim.timeLeft.toFixed(1);
    if (stim.timeLeft <= 0) finishStim();
  }, 100);

  spawnTarget();
}

function spawnTarget() {
  if (!stim.running) return;
  const cfg = STIM_CONFIGS[stimDiff];
  const arena = document.getElementById('stimArena');
  const W = arena.clientWidth, H = arena.clientHeight;
  const s = cfg.size;
  const x = Math.max(5, Math.random() * (W - s - 10));
  const y = Math.max(5, Math.random() * (H - s - 10));

  const palette = [
    ['#00f5a0','#003d29'], ['#ff2d55','#3d000d'],
    ['#ffe000','#3d3700'], ['#7b61ff','#1e0f4a'], ['#ff6b00','#3d1a00']
  ];
  const [col, bg] = palette[Math.floor(Math.random() * palette.length)];

  const el = document.createElement('div');
  el.className = 'stim-target';
  el.style.cssText = `left:${x}px;top:${y}px;width:${s}px;height:${s}px;background:${bg};border:3px solid ${col};`;

  // Shrinking ring
  const ring = document.createElement('div');
  ring.className = 'target-ring';
  ring.style.cssText = `border:2px solid ${col};`;
  el.appendChild(ring);

  // Hit handler
  const tObj = { el, hit:false, expTimer:null };
  activeTargets.push(tObj);

  el.addEventListener('click', e => {
    e.stopPropagation();
    if (tObj.hit) return;
    tObj.hit = true;
    clearTimeout(tObj.expTimer);
    stim.hits++;
    stim.score += cfg.pts;
    document.getElementById('stScore').textContent = stim.score;
    document.getElementById('stHits').textContent  = stim.hits;
    updateStimAcc();
    // Hit popup
    const popup = document.createElement('div');
    popup.className = 'hit-popup';
    popup.style.cssText = `left:${x+s/2}px;top:${y}px;color:${col}`;
    popup.textContent = '+' + cfg.pts;
    arena.appendChild(popup);
    setTimeout(() => { if(popup.parentNode) popup.parentNode.removeChild(popup); }, 500);
    // Remove target
    el.style.transition = 'transform 0.1s, opacity 0.1s';
    el.style.transform = 'scale(1.4)'; el.style.opacity = '0';
    setTimeout(() => { if(el.parentNode) el.parentNode.removeChild(el); }, 120);
    activeTargets = activeTargets.filter(t => t !== tObj);
  });

  // Expiry
  tObj.expTimer = setTimeout(() => {
    if (!tObj.hit && el.parentNode) {
      el.parentNode.removeChild(el);
      stim.misses++;
      updateStimAcc();
      activeTargets = activeTargets.filter(t => t !== tObj);
    }
  }, cfg.lifetime);

  arena.appendChild(el);

  // Next spawn
  stim.spawnTimer = setTimeout(spawnTarget, cfg.interval);
}

function updateStimAcc() {
  const total = stim.hits + stim.misses;
  document.getElementById('stAcc').textContent = total > 0
    ? Math.round(stim.hits / total * 100) + '%' : 'â€”';
}

function finishStim() {
  clearInterval(stim.iv); clearTimeout(stim.spawnTimer);
  stim.running = false;
  activeTargets.forEach(t => { clearTimeout(t.expTimer); if(t.el.parentNode) t.el.parentNode.removeChild(t.el); });
  activeTargets = [];

  const acc = stim.hits + stim.misses > 0
    ? Math.round(stim.hits / (stim.hits + stim.misses) * 100) : 0;

  let rank = 'ğŸ¢ BEGINNER', rankColor = '#50507a';
  if      (stim.score >= 9000) { rank = 'âš¡ GOD TIER';  rankColor = '#ff2d55'; }
  else if (stim.score >= 6000) { rank = 'ğŸ† ELITE';     rankColor = '#ffe000'; }
  else if (stim.score >= 3500) { rank = 'âš¡ SKILLED';   rankColor = '#00f5a0'; }
  else if (stim.score >= 1500) { rank = 'ğŸ‡ AVERAGE';   rankColor = '#7b61ff'; }

  document.getElementById('stFinalScore').textContent = stim.score;
  document.getElementById('stFinalScore').style.color = rankColor;
  document.getElementById('stFinalAcc').textContent   = acc + '%';
  document.getElementById('stFinalRank').textContent  = rank;
  document.getElementById('stFinalRank').style.color  = rankColor;
  document.getElementById('stimResult').classList.add('show');
}

// Click on arena background = miss
document.getElementById('stimArena').addEventListener('click', e => {
  if (!stim.running) return;
  if (e.target.id === 'stimArena' || e.target === document.getElementById('stimArena')) {
    stim.misses++;
    updateStimAcc();
    // Miss flash
    const flash = document.createElement('div');
    flash.className = 'miss-flash';
    const rect = document.getElementById('stimArena').getBoundingClientRect();
    flash.style.left = (e.clientX - rect.left) + 'px';
    flash.style.top  = (e.clientY - rect.top) + 'px';
    document.getElementById('stimArena').appendChild(flash);
    setTimeout(() => { if(flash.parentNode) flash.parentNode.removeChild(flash); }, 400);
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FAQ ACCORDION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.faq-q').forEach(btn => {
  btn.addEventListener('click', () => {
    const item = btn.closest('.faq-item');
    const open = item.classList.contains('open');
    document.querySelectorAll('.faq-item.open').forEach(el => {
      el.classList.remove('open');
      el.querySelector('.faq-q').setAttribute('aria-expanded','false');
    });
    if (!open) { item.classList.add('open'); btn.setAttribute('aria-expanded','true'); }
  });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LANGUAGE SYSTEM (EN / TR)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TRANSLATIONS = {
  en: {
    // nav
    tabReaction:'âš¡ Reaction', tabStimulation:'ğŸ¯ Stimulation', tabCPS:'ğŸ”¥ Click Speed',
    tabJitter:'ğŸ–± Jitter Click', tabKohi:'â˜• Kohi Click', tabSpacebar:'âŒ¨ï¸ Spacebar',
    durLabel:'Duration', modeLabel:'Mode', modeNormal:'ğŸ–± Normal', modeChallenge:'âš¡ Challenge',
    // cps panel
    cpsH1_cps:'Click Speed Test', cpsH1_jitter:'Jitter Click Test', cpsH1_kohi:'Kohi Click Test',
    cpsSubSuffix_cps:'click as fast as you can', cpsSubSuffix_jitter:'tense & vibrate for max speed', cpsSubSuffix_kohi:'sustained CPS endurance',
    cpsClickStart:'Click Here to Start', cpsKeepClick:'Keep clicking!', cpsChallengeStart:'âš¡ Hit targets for combos!', cpsTip:'âš¡ CHALLENGE MODE â€” Hit targets for bonus clicks!',
    lCPS:'CPS', lClicks:'Clicks', lBestCPS:'Best CPS', lTimeLeft:'Time Left',
    rYourScore:'Your Score', rCPS:'Clicks Per Second', rRetry:'â†º Try Again',
    // spacebar
    sTitle:'Spacebar Speed Test', sPressSec:'Press/sec', sTotalPress:'Total Presses', sBest:'Best',
    sStart:'Press Space Key or Tap Above to Start', sKeep:'Keep pressing!',
    rPPS:'Presses Per Second',
    // reaction
    rTitle:'Reaction Speed Test', rSub5r:'5 rounds â€” tap when the arena turns green',
    rScore:'Score', rBest:'Best', rAvg:'Average', rRound:'Round', rProgress:'Round Progress',
    rWaitTxt:'Wait...', rWaitSub:'Tap when it turns green!', rGoTxt:'TAP NOW!', rGoSub:'Hit it!',
    rEarlyTxt:'TOO EARLY!', rEarlySub:'-200 pts â€” Be more patient',
    rOverTxt:'Game Over!', rOverSub:'Check your results',
    rFastLB:'Fastest', rAvgLB:'Average', rScoreLB:'Score', rPlayAgain:'â†º Play Again',
    rTapStart:'Tap to Start', rTestSub:'Test your reaction speed',
    // stim
    stTitle:'Stimulation Clicker', stSub:'Click the targets before they disappear',
    stScore:'Score', stHits:'Targets Hit', stAcc:'Accuracy',
    stIdleSub:'Choose difficulty and start', stStart:'â–¶ START', stReplay:'â†º Play Again',
    stFinalLbl:'Final Score', stAccLbl:'Accuracy:',
    // info
    aboutTitle:'ABOUT THE TESTS', worldTitle:'WORLD RECORDS', reactionTitle:'REACTION TIME',
    // footer
    footCopy:'Reaction Speed Test â€” Free Online CPS & Reaction Time Tester',
    footSub:'Test your click speed, jitter click, Kohi click, spacebar speed, and reaction time for free. No downloads. No registration.',
    // challenge tip
    challengeTipText:'âš¡ CHALLENGE MODE â€” Hit targets for bonus clicks!',
    // stim idle title
    stimIdleTitle:'Stimulation Clicker',
  },
  tr: {
    tabReaction:'âš¡ Tepki Testi', tabStimulation:'ğŸ¯ Hedef TÄ±klama', tabCPS:'ğŸ”¥ TÄ±klama HÄ±zÄ±',
    tabJitter:'ğŸ–± Jitter TÄ±klama', tabKohi:'â˜• Kohi Testi', tabSpacebar:'âŒ¨ï¸ BoÅŸluk Ã‡ubuÄŸu',
    durLabel:'SÃ¼re', modeLabel:'Mod', modeNormal:'ğŸ–± Normal', modeChallenge:'âš¡ Zorlu',
    cpsH1_cps:'TÄ±klama HÄ±zÄ± Testi', cpsH1_jitter:'Jitter TÄ±klama Testi', cpsH1_kohi:'Kohi TÄ±klama Testi',
    cpsSubSuffix_cps:'olabildiÄŸince hÄ±zlÄ± tÄ±kla', cpsSubSuffix_jitter:'titretme tekniÄŸiyle max hÄ±z', cpsSubSuffix_kohi:'sÃ¼rdÃ¼rÃ¼lebilir TPS testi',
    cpsClickStart:'BaÅŸlamak iÃ§in TÄ±kla', cpsKeepClick:'TÄ±klamaya devam et!', cpsChallengeStart:'âš¡ Hedeflere tÄ±kla, kombo yap!', cpsTip:'âš¡ ZORLU MOD â€” Hedeflere tÄ±kla, bonus kazan!',
    lCPS:'TPS', lClicks:'TÄ±klama', lBestCPS:'En Ä°yi TPS', lTimeLeft:'Kalan SÃ¼re',
    rYourScore:'Skorun', rCPS:'Saniye BaÅŸÄ±na TÄ±klama', rRetry:'â†º Tekrar Dene',
    sTitle:'BoÅŸluk Ã‡ubuÄŸu Testi', sPressSec:'BasÄ±ÅŸ/sn', sTotalPress:'Toplam BasÄ±ÅŸ', sBest:'En Ä°yi',
    sStart:'BoÅŸluk tuÅŸuna bas veya yukarÄ±ya dokun', sKeep:'Basmaya devam et!',
    rPPS:'Saniye BaÅŸÄ±na BasÄ±ÅŸ',
    rTitle:'Tepki HÄ±zÄ± Testi', rSub5r:'5 tur â€” alan yeÅŸile dÃ¶nÃ¼nce dokun',
    rScore:'Skor', rBest:'En Ä°yi', rAvg:'Ortalama', rRound:'Tur', rProgress:'Tur Takibi',
    rWaitTxt:'Bekle...', rWaitSub:'Alan yeÅŸile dÃ¶nÃ¼nce dokun!', rGoTxt:'DOKUN!', rGoSub:'Hadi!',
    rEarlyTxt:'Ã‡OK ERKEN!', rEarlySub:'-200 puan â€” Daha sabÄ±rlÄ± ol',
    rOverTxt:'Oyun Bitti!', rOverSub:'SonuÃ§larÄ±na bak',
    rFastLB:'En HÄ±zlÄ±', rAvgLB:'Ortalama', rScoreLB:'Skor', rPlayAgain:'â†º Tekrar Oyna',
    rTapStart:'BaÅŸlamak iÃ§in Dokun', rTestSub:'Tepki hÄ±zÄ±nÄ± test et',
    stTitle:'Hedef TÄ±klama', stSub:'Hedefler kaybolmadan Ã¶nce tÄ±kla',
    stScore:'Skor', stHits:'Hedef Ä°sabeti', stAcc:'Ä°sabet OranÄ±',
    stIdleSub:'Zorluk seÃ§ ve baÅŸla', stStart:'â–¶ BAÅLA', stReplay:'â†º Tekrar Oyna',
    stFinalLbl:'Final Skor', stAccLbl:'Ä°sabet:',
    aboutTitle:'TESTLER HAKKINDA', worldTitle:'DÃœNYA REKORLARI', reactionTitle:'TEPKÄ° SÃœRESÄ°',
    footCopy:'Tepki Testi â€” Ãœcretsiz Online TPS & Tepki SÃ¼resi Testi',
    footSub:'TÄ±klama hÄ±zÄ±, jitter tÄ±klama, Kohi, boÅŸluk Ã§ubuÄŸu ve tepki sÃ¼ren testlerini Ã¼cretsiz dene. Ä°ndirme yok. KayÄ±t yok.',
    challengeTipText:'âš¡ ZORLU MOD â€” Hedeflere tÄ±kla, bonus kazan!',
    stimIdleTitle:'Hedef TÄ±klama',
  }
};

let currentLang = 'en';

function setLang(l) {
  currentLang = l;
  document.getElementById('lbtnTR').classList.toggle('active', l==='tr');
  document.getElementById('lbtnEN').classList.toggle('active', l==='en');
  document.documentElement.lang = l;
  const T = TRANSLATIONS[l];

  // Tabs
  const tabs = document.querySelectorAll('.tab[data-panel]');
  const tabMap = { reaction:'tabReaction', stimulation:'tabStimulation', cps:'tabCPS', jitter:'tabJitter', kohi:'tabKohi', spacebar:'tabSpacebar' };
  tabs.forEach(t => { if(tabMap[t.dataset.panel]) t.innerHTML = T[tabMap[t.dataset.panel]]; });

  // Row2 labels
  document.querySelectorAll('.row2-label')[0].textContent = T.durLabel;
  document.querySelectorAll('.row2-label')[1].textContent = T.modeLabel;
  document.getElementById('modeNormal').textContent = T.modeNormal;
  document.getElementById('modeChallenge').textContent = T.modeChallenge;

  // CPS panel
  const p = ['cps','jitter','kohi'].includes(curPanel) ? curPanel : 'cps';
  document.getElementById('cpsH1').textContent = T['cpsH1_'+p] || T.cpsH1_cps;
  document.getElementById('cpsSub').textContent = `${curDuration}s â€” ${T['cpsSubSuffix_'+p] || T.cpsSubSuffix_cps}`;
  document.querySelector('#clickArena .arena-label')?.textContent; // keep state
  document.getElementById('challengeTip').textContent = T.challengeTipText;

  // Stats labels CPS
  const sc = document.querySelectorAll('#panel-cps .slbl');
  if(sc.length>=4){ sc[0].textContent=T.lCPS; sc[1].textContent=T.lClicks; sc[2].textContent=T.lBestCPS; sc[3].textContent=T.lTimeLeft; }
  document.querySelector('#cResult .r-label').textContent = T.rYourScore;
  document.querySelector('#cResult .r-unit').textContent = T.rCPS;
  document.querySelector('#cResult .r-retry').textContent = T.rRetry;

  // Spacebar
  document.querySelector('#panel-spacebar h1').textContent = T.sTitle;
  const ss = document.querySelectorAll('#panel-spacebar .slbl');
  if(ss.length>=4){ ss[0].textContent=T.sPressSec; ss[1].textContent=T.sTotalPress; ss[2].textContent=T.sBest; ss[3].textContent=T.lTimeLeft; }
  document.querySelector('#sResult .r-label').textContent = T.rYourScore;
  document.querySelector('#sResult .r-unit').textContent = T.rPPS;
  document.querySelector('#sResult .r-retry').textContent = T.rRetry;

  // Reaction
  document.querySelector('#panel-reaction h1').textContent = T.rTitle;
  document.querySelector('#panel-reaction .gsub').textContent = T.rSub5r;
  document.getElementById('lScore').textContent = T.rScore;
  document.getElementById('lBest').textContent  = T.rBest;
  document.getElementById('lAvg').textContent   = T.rAvg;
  document.getElementById('lRound').textContent = T.rRound;
  document.getElementById('lDots').textContent  = T.rProgress;
  document.getElementById('goLB').textContent   = T.rFastLB;
  document.getElementById('goLA').textContent   = T.rAvgLB;
  document.getElementById('goLS').textContent   = T.rScoreLB;
  document.getElementById('replayBtn').textContent = T.rPlayAgain;
  if(rState==='idle'||rState==='gameover'){
    document.getElementById('rText').textContent = T.rTapStart;
    document.getElementById('rSub').textContent  = T.rTestSub;
  }

  // Stim
  document.querySelector('#panel-stimulation h1').textContent = T.stTitle;
  document.querySelector('#panel-stimulation .gsub').textContent = T.stSub;
  const stCards = document.querySelectorAll('#panel-stimulation .slbl');
  if(stCards.length>=4){ stCards[0].textContent=T.stScore; stCards[1].textContent=T.stHits; stCards[2].textContent=T.stAcc; stCards[3].textContent=T.lTimeLeft; }
  document.querySelector('.stim-idle-sub').textContent = T.stIdleSub;
  document.querySelector('.stim-idle-title').textContent = T.stimIdleTitle;
  document.querySelector('.stim-start-btn').textContent = T.stStart;
  document.querySelector('.stim-replay').textContent = T.stReplay;
  document.querySelector('#stimResult .r-label').textContent = T.stFinalLbl;

  // Dividers
  const divs = document.querySelectorAll('.sec-divider');
  if(divs[0]) divs[0].textContent = T.aboutTitle;
  if(divs[1]) divs[1].textContent = T.worldTitle;
  if(divs[2]) divs[2].textContent = T.reactionTitle;

  // Footer
  const footPs = document.querySelectorAll('.sfooter p');
  if(footPs[0]) footPs[0].innerHTML = `Â© <span id="footYear"></span> ${T.footCopy}`;
  if(footPs[1]) footPs[1].innerHTML = T.footSub;
  document.getElementById('footYear').textContent = new Date().getFullYear();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TYPING TEST ENGINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const WORD_LIST = ['the','be','to','of','and','in','that','have','it','for','on','with','he','as','you','do','at','this','but','his','by','from','they','we','say','her','she','or','an','will','my','one','all','would','there','their','what','so','up','out','if','about','who','get','which','go','me','when','make','can','like','time','no','just','him','know','take','people','into','year','your','good','some','could','them','see','other','than','then','now','look','only','come','its','over','think','also','back','after','use','two','how','our','work','first','well','way','even','new','want','because','any','these','give','day','most','us','great','between','need','large','often','hand','high','place','hold','real','life','few','north','open','seem','together','next','white','children','begin','got','walk','example','ease','paper','group','always','music','those','both','mark','book','letter','until','mile','river','car','feet','care','second','enough','plain','girl','usual','young','ready','above','ever','red','list','though','feel','talk','bird','soon','body','dog','family','direct','pose','leave'];

let typing = { running:false, duration:60, timeLeft:60, iv:null, words:[], currentIdx:0, correctCount:0, wrongCount:0, charCount:0, startTime:null };

function setTypingDuration(s) {
  typing.duration = s;
  ['30','60','120'].forEach(x => {
    document.getElementById('td'+x).classList.toggle('active', +x === s);
  });
  resetTyping();
}

function generateWords() {
  const arr = [];
  for (let i = 0; i < 80; i++) arr.push(WORD_LIST[Math.floor(Math.random()*WORD_LIST.length)]);
  return arr;
}

function renderWords() {
  const container = document.getElementById('tWords');
  container.innerHTML = '';
  typing.words.forEach((w, i) => {
    const span = document.createElement('span');
    span.textContent = w;
    span.id = 'tw' + i;
    span.style.cssText = 'padding:2px 4px;border-radius:4px;transition:all 0.1s;';
    if (i < typing.currentIdx) {
      span.style.color = '#00f5a0';
    } else if (i === typing.currentIdx) {
      span.style.color = '#f0f0ff';
      span.style.background = 'rgba(0,180,216,0.18)';
      span.style.borderBottom = '2px solid #00b4d8';
      // scroll into view
      setTimeout(() => span.scrollIntoView({block:'nearest'}), 10);
    } else {
      span.style.color = '#6060a0';
    }
    container.appendChild(span);
  });
}

function resetTyping() {
  clearInterval(typing.iv);
  typing = { running:false, duration:typing.duration, timeLeft:typing.duration, iv:null, words:generateWords(), currentIdx:0, correctCount:0, wrongCount:0, charCount:0, startTime:null };
  document.getElementById('tWpm').textContent = '0';
  document.getElementById('tAcc').textContent = 'â€”';
  document.getElementById('tCorrect').textContent = '0';
  document.getElementById('tTime').textContent = typing.duration;
  document.getElementById('tResult').style.display = 'none';
  document.getElementById('tInput').value = '';
  document.getElementById('tInput').disabled = false;
  renderWords();
}

function finishTyping() {
  clearInterval(typing.iv); typing.running = false;
  document.getElementById('tInput').disabled = true;
  const elapsed = typing.duration;
  const wpm = Math.round(typing.correctCount / (elapsed / 60));
  const total = typing.correctCount + typing.wrongCount;
  const acc = total > 0 ? Math.round(typing.correctCount / total * 100) : 100;
  document.getElementById('tFinalWpm').textContent = wpm;
  document.getElementById('tFinalAcc').textContent = `Accuracy: ${acc}% â€” ${typing.correctCount} correct words`;
  document.getElementById('tResult').style.display = 'flex';
}

document.getElementById('tInput').addEventListener('input', function() {
  const val = this.value;
  if (!typing.running && val.length > 0) {
    typing.running = true; typing.startTime = Date.now();
    typing.iv = setInterval(() => {
      typing.timeLeft--;
      document.getElementById('tTime').textContent = typing.timeLeft;
      const elapsed = Math.max(1, typing.duration - typing.timeLeft);
      const wpm = Math.round(typing.correctCount / (elapsed / 60));
      document.getElementById('tWpm').textContent = wpm;
      if (typing.timeLeft <= 0) finishTyping();
    }, 1000);
  }
  if (!typing.running && val.length === 0) return;
  if (val.endsWith(' ')) {
    const typed = val.trim();
    const target = typing.words[typing.currentIdx];
    if (typed === target) { typing.correctCount++; } else { typing.wrongCount++; }
    typing.currentIdx++;
    this.value = '';
    document.getElementById('tCorrect').textContent = typing.correctCount;
    const total = typing.correctCount + typing.wrongCount;
    document.getElementById('tAcc').textContent = total > 0 ? Math.round(typing.correctCount/total*100)+'%' : 'â€”';
    if (typing.currentIdx >= typing.words.length) { typing.words = typing.words.concat(generateWords()); }
    renderWords();
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COREBALL â€” fixed: slower speed, ball visible during flight
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cbCanvas = document.getElementById('coreCanvas');
const cbCtx = cbCanvas.getContext('2d');
let cb = { score:0, best:0, level:1, ballsLeft:10, angle:0, speed:0.012, balls:[], stuck:[], gameOver:false, animId:null };

function cbReset() {
  if(cb.animId) cancelAnimationFrame(cb.animId);
  cb = { score:0, best:cb.best, level:1, ballsLeft:10, angle:0, speed:0.012, balls:[], stuck:[], gameOver:false, animId:null };
  document.getElementById('cbScore').textContent = '0';
  document.getElementById('cbLevel').textContent = '1';
  document.getElementById('cbBalls').textContent = '10';
  document.getElementById('cbMsg').textContent = 'TAP TO SHOOT';
  cbDraw();
}

function cbDraw() {
  const W = cbCanvas.width, H = cbCanvas.height, cx = W/2, cy = H/2, R = 110;
  cbCtx.clearRect(0, 0, W, H);

  // Core circle
  cbCtx.beginPath();
  cbCtx.arc(cx, cy, R, 0, Math.PI*2);
  cbCtx.strokeStyle = cb.gameOver ? '#ff2d55' : '#2a2a4a';
  cbCtx.lineWidth = 4;
  cbCtx.stroke();

  // Spokes for stuck balls
  cb.stuck.forEach(s => {
    const bx = cx + Math.cos(s.angle) * R;
    const by = cy + Math.sin(s.angle) * R;
    cbCtx.beginPath();
    cbCtx.moveTo(cx, cy);
    cbCtx.lineTo(bx, by);
    cbCtx.strokeStyle = s.color + '30';
    cbCtx.lineWidth = 1;
    cbCtx.stroke();
    cbCtx.beginPath();
    cbCtx.arc(bx, by, 10, 0, Math.PI*2);
    cbCtx.fillStyle = s.color;
    cbCtx.fill();
  });

  // Flying balls â€” clearly visible
  cb.balls.forEach(b => {
    // Trail
    cbCtx.beginPath();
    cbCtx.arc(b.x, b.y + 8, 6, 0, Math.PI*2);
    cbCtx.fillStyle = b.color + '40';
    cbCtx.fill();
    // Ball
    cbCtx.beginPath();
    cbCtx.arc(b.x, b.y, 10, 0, Math.PI*2);
    cbCtx.fillStyle = b.color;
    cbCtx.fill();
    cbCtx.beginPath();
    cbCtx.arc(b.x - 3, b.y - 3, 3, 0, Math.PI*2);
    cbCtx.fillStyle = 'rgba(255,255,255,0.5)';
    cbCtx.fill();
  });

  // Score
  cbCtx.fillStyle = cb.gameOver ? '#ff2d55' : '#ffffff';
  cbCtx.font = `bold ${cb.gameOver?24:38}px 'Bebas Neue',sans-serif`;
  cbCtx.textAlign = 'center'; cbCtx.textBaseline = 'middle';
  cbCtx.fillText(cb.gameOver ? 'GAME OVER' : cb.score, cx, cy);

  // Remaining balls dots
  const totalDots = 10;
  for (let i = 0; i < totalDots; i++) {
    const dx = cx + (i - totalDots/2 + 0.5) * 20;
    cbCtx.beginPath();
    cbCtx.arc(dx, H - 20, 6, 0, Math.PI*2);
    cbCtx.fillStyle = i < cb.ballsLeft ? '#00f5a0' : '#1c1c30';
    cbCtx.fill();
  }

  // Shooter indicator at bottom
  cbCtx.beginPath();
  cbCtx.arc(cx, H - 20, 10, 0, Math.PI*2);
  cbCtx.strokeStyle = '#ffffff40';
  cbCtx.lineWidth = 2;
  cbCtx.stroke();
  // aim line
  cbCtx.beginPath();
  cbCtx.setLineDash([4, 4]);
  cbCtx.moveTo(cx, H - 30);
  cbCtx.lineTo(cx, cy + R + 20);
  cbCtx.strokeStyle = '#ffffff20';
  cbCtx.lineWidth = 1;
  cbCtx.stroke();
  cbCtx.setLineDash([]);
}

const CB_COLORS = ['#00f5a0','#ff2d55','#ffe000','#7b61ff','#ff6b00','#00b4d8','#ff69b4'];

function cbLoop() {
  if (curPanel !== 'coreball') return;
  const W = cbCanvas.width, H = cbCanvas.height, cx = W/2, cy = H/2, R = 110;

  cb.angle += cb.speed;
  cb.stuck.forEach(s => s.angle += cb.speed);

  cb.balls = cb.balls.filter(b => {
    b.y += b.vy;
    const dx = b.x - cx, dy = b.y - cy;
    const dist = Math.sqrt(dx*dx + dy*dy);

    if (dist <= R + 12) {
      const hitAngle = Math.atan2(dy, dx);
      const collision = cb.stuck.some(s => {
        let diff = Math.abs(s.angle - hitAngle);
        if (diff > Math.PI) diff = Math.PI*2 - diff;
        return diff < 0.24;
      });
      if (collision) {
        cb.gameOver = true;
        if (cb.score > cb.best) { cb.best = cb.score; document.getElementById('cbBest').textContent = cb.best; }
        document.getElementById('cbMsg').textContent = 'ğŸ’¥ TAP TO PLAY AGAIN';
        cbDraw();
        return false;
      }
      cb.stuck.push({ angle: hitAngle, color: b.color });
      cb.score++;
      document.getElementById('cbScore').textContent = cb.score;
      // Speed up every ball â€” progressive difficulty
      cb.speed = Math.min(0.012 + cb.score * 0.0015, 0.055);
      if (cb.score % 10 === 0) {
        cb.level++;
        document.getElementById('cbLevel').textContent = cb.level;
      }
      return false;
    }
    if (b.y < -20) return false;
    return true;
  });

  cbDraw();
  if (!cb.gameOver) cb.animId = requestAnimationFrame(cbLoop);
}

cbCanvas.addEventListener('click', () => {
  if (cb.gameOver) { cbReset(); return; }
  if (cb.ballsLeft <= 0) return;
  cb.ballsLeft--;
  document.getElementById('cbBalls').textContent = cb.ballsLeft;
  document.getElementById('cbMsg').textContent = `${cb.ballsLeft} balls left`;
  const color = CB_COLORS[Math.floor(Math.random()*CB_COLORS.length)];
  cb.balls.push({ x: cbCanvas.width/2, y: cbCanvas.height - 40, vy: -4, color });
  if (!cb.animId || cb.gameOver) { cb.animId = null; cbLoop(); }
});
cbCanvas.addEventListener('touchstart', e => { e.preventDefault(); cbCanvas.click(); }, {passive:false});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DINOSAUR GAME ENGINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const dc = document.getElementById('dinoCanvas');
const dctx = dc.getContext('2d');
let dino = {
  x:80, y:220, w:44, h:48, vy:0, jumping:false, ducking:false,
  score:0, best:0, speed:5, alive:false, started:false,
  obstacles:[], clouds:[], frame:0, animId:null, groundY:240,
  legFrame:0
};

function dinoReset() {
  if(dino.animId) cancelAnimationFrame(dino.animId);
  const best = dino.best;
  dino = {
    x:80, y:220, w:44, h:48, vy:0, jumping:false, ducking:false,
    score:0, best, speed:5, alive:false, started:false,
    obstacles:[], clouds:[], frame:0, animId:null, groundY:240,
    legFrame:0
  };
  document.getElementById('dinoScore').textContent = '0';
  document.getElementById('dinoSpeed').textContent = '1x';
  document.getElementById('dinoStatus').textContent = 'Ready';
  dinoDraw();
}

function dinoJump() {
  if (!dino.started) {
    dino.started = true; dino.alive = true;
    document.getElementById('dinoStatus').textContent = 'Running';
    dino.animId = requestAnimationFrame(dinoLoop);
  }
  if (!dino.jumping && !dino.ducking && dino.y >= dino.groundY - dino.h) {
    dino.vy = -14; dino.jumping = true;
  }
}

function dinoDuck(on) {
  if (on && !dino.jumping) { dino.ducking = true; dino.h = 28; dino.y = dino.groundY - 28; }
  else { dino.ducking = false; dino.h = 48; dino.y = Math.min(dino.y, dino.groundY - 48); }
}

function dinoSpawnObstacle() {
  const types = ['cactus-s','cactus-m','cactus-l','bird'];
  const t = types[Math.floor(Math.random()*types.length)];
  const isBird = t === 'bird';
  dino.obstacles.push({
    x: dc.width + 20,
    y: isBird ? dino.groundY - 60 - Math.random()*40 : dino.groundY,
    w: isBird ? 46 : t==='cactus-s'?20:t==='cactus-m'?28:38,
    h: isBird ? 32 : t==='cactus-s'?40:t==='cactus-m'?52:60,
    type: t, bird: isBird, wingUp: true, wingTimer: 0
  });
}

function dinoCheckHit() {
  const pad = 6;
  const dx = dino.x + pad, dy = dino.y + pad, dw = dino.w - pad*2, dh = dino.h - pad*2;
  return dino.obstacles.some(o => {
    const op = 4;
    return dx < o.x+o.w-op && dx+dw > o.x+op && dy < o.y && dy+dh > o.y-o.h;
  });
}

function dinoDraw() {
  const W = dc.width, H = dc.height, gy = dino.groundY;
  dctx.clearRect(0, 0, W, H);

  // Ground
  dctx.fillStyle = '#2a2a4a';
  dctx.fillRect(0, gy, W, 2);

  // Clouds
  dino.clouds.forEach(c => {
    dctx.fillStyle = 'rgba(255,255,255,0.08)';
    dctx.beginPath();
    dctx.ellipse(c.x, c.y, 40, 14, 0, 0, Math.PI*2);
    dctx.fill();
  });

  // Dino body
  const col = !dino.alive ? '#444466' : dino.jumping ? '#00f5a0' : '#ffffff';
  dctx.fillStyle = col;
  // Body
  dctx.fillRect(dino.x, dino.y, dino.w, dino.h);
  // Eye
  dctx.fillStyle = '#06060e';
  dctx.fillRect(dino.x + dino.w - 10, dino.y + 8, 7, 7);
  // Legs (only when running)
  if (!dino.jumping && dino.alive) {
    dctx.fillStyle = col;
    const leg = Math.floor(dino.legFrame/4) % 2;
    dctx.fillRect(dino.x + 8, dino.y + dino.h, 10, leg ? 12 : 4);
    dctx.fillRect(dino.x + 22, dino.y + dino.h, 10, leg ? 4 : 12);
  }

  // Obstacles
  dino.obstacles.forEach(o => {
    if (o.bird) {
      dctx.fillStyle = '#ff6b00';
      dctx.fillRect(o.x, o.y - o.h + (o.wingUp ? 0 : 10), o.w, o.h - 10);
      // Wings
      dctx.fillRect(o.x + 4, o.y - o.h + (o.wingUp ? -12 : 0), o.w - 8, 10);
    } else {
      dctx.fillStyle = '#00f5a0';
      dctx.fillRect(o.x, o.y - o.h, o.w, o.h);
      // Cactus arms
      dctx.fillRect(o.x - 8, o.y - o.h + 12, 8, 16);
      dctx.fillRect(o.x + o.w, o.y - o.h + 18, 8, 12);
    }
  });

  // Score
  dctx.fillStyle = '#ffffff';
  dctx.font = '700 18px JetBrains Mono,monospace';
  dctx.textAlign = 'right';
  dctx.fillText(String(Math.floor(dino.score)).padStart(5,'0'), W - 20, 30);
  if (dino.best > 0) {
    dctx.fillStyle = '#6060a0';
    dctx.font = '12px JetBrains Mono,monospace';
    dctx.fillText('HI ' + String(dino.best).padStart(5,'0'), W - 20, 50);
  }

  // Start / Game Over overlay
  if (!dino.started) {
    dctx.fillStyle = 'rgba(6,6,14,0.6)';
    dctx.fillRect(0, 0, W, H);
    dctx.fillStyle = '#ffffff';
    dctx.font = 'bold 28px Bebas Neue,sans-serif';
    dctx.textAlign = 'center';
    dctx.fillText('PRESS SPACE OR TAP TO START', W/2, H/2);
  } else if (!dino.alive) {
    dctx.fillStyle = 'rgba(6,6,14,0.7)';
    dctx.fillRect(0, 0, W, H);
    dctx.fillStyle = '#ff2d55';
    dctx.font = 'bold 32px Bebas Neue,sans-serif';
    dctx.textAlign = 'center';
    dctx.fillText('GAME OVER', W/2, H/2 - 20);
    dctx.fillStyle = '#ffffff';
    dctx.font = '18px Bebas Neue,sans-serif';
    dctx.fillText('TAP TO RESTART', W/2, H/2 + 20);
  }
  dctx.textAlign = 'left';
}

function dinoLoop() {
  if (curPanel !== 'dino' || !dino.alive) return;

  dino.frame++;
  dino.legFrame++;
  dino.score += 0.1;
  dino.speed = 5 + dino.score * 0.005;

  // Physics
  dino.vy += 0.7;
  dino.y += dino.vy;
  if (dino.y >= dino.groundY - dino.h) {
    dino.y = dino.groundY - dino.h;
    dino.vy = 0; dino.jumping = false;
  }

  // Spawn obstacles
  const gap = Math.max(800 - dino.score * 2, 400);
  if (dino.obstacles.length === 0 || dc.width - dino.obstacles[dino.obstacles.length-1].x > gap + Math.random()*300) {
    dinoSpawnObstacle();
  }

  // Move & animate obstacles
  dino.obstacles = dino.obstacles.filter(o => {
    o.x -= dino.speed;
    o.wingTimer++;
    if (o.wingTimer > 8) { o.wingUp = !o.wingUp; o.wingTimer = 0; }
    return o.x > -100;
  });

  // Clouds
  if (Math.random() < 0.005) dino.clouds.push({x: dc.width, y: 40 + Math.random()*60});
  dino.clouds = dino.clouds.filter(c => { c.x -= 0.8; return c.x > -100; });

  // Score & speed display
  const sc = Math.floor(dino.score);
  document.getElementById('dinoScore').textContent = sc;
  document.getElementById('dinoSpeed').textContent = (1 + dino.score*0.005).toFixed(1) + 'x';

  if (dinoCheckHit()) {
    dino.alive = false;
    if (sc > dino.best) { dino.best = sc; document.getElementById('dinoBest').textContent = dino.best; }
    document.getElementById('dinoStatus').textContent = 'Dead ğŸ’€';
    dinoDraw();
    return;
  }

  dinoDraw();
  dino.animId = requestAnimationFrame(dinoLoop);
}

dc.addEventListener('click', () => {
  if (!dino.started || !dino.alive) { dinoReset(); setTimeout(()=>{ dinoJump(); }, 100); }
  else dinoJump();
});
dc.addEventListener('touchstart', e => { e.preventDefault(); dc.click(); }, {passive:false});
document.addEventListener('keydown', e => {
  if (curPanel !== 'dino') return;
  if (e.code === 'Space' || e.code === 'ArrowUp') { e.preventDefault(); if (!e.repeat) dinoJump(); }
  if (e.code === 'ArrowDown') { e.preventDefault(); dinoDuck(true); }
});
document.addEventListener('keyup', e => {
  if (e.code === 'ArrowDown') dinoDuck(false);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('footYear').textContent = new Date().getFullYear();
setLang('en');
resetTyping();
cbReset();
dinoReset();
switchPanel('reaction');
setDuration(5);
</script>
</body>
</html>
